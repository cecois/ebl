webpackJsonp([1],{"/U+F":function(t,e,s){"use strict";(function(t){e.a={name:"evERyBlINE",created:function(){},beforeDestroy:function(){window.removeEventListener("keydown",this.keyMonitor)},mounted:function(){if(this.actives={rideKey:this.$route.params.ridekey&&"$"!=this.$route.params.ridekey?this.$route.params.ridekey:null,rideIso:this.$route.params.rideiso&&"$"!=this.$route.params.rideiso?this.$route.params.rideiso:null,baseMap:this.$route.params.basemap&&"$"!=this.$route.params.basemap?this.$route.params.basemap:"carto_positron",queryString:this.$route.params.query&&"$"!=this.$route.params.query?this.$route.params.query:null,bboxString:this.$route.params.bbox&&"$"!=this.$route.params.bbox?this.$route.params.bbox:null,splayed:"S"==this.$route.params.splayed},window.addEventListener("keydown",this.keyMonitor),this.loadings.app=!0,this.konsole=[{msg:new Date,klass:"is-info",timeout:20,timeout:20}],this.MAP=new L.Map("map",{editable:!0,zoomControl:!1,center:[42,-72],attributionControl:!1,zoom:11}).on("moveend",t=>{this.actives.bboxString=this.MAP.getBounds().toBBoxString()}),this.actives.bboxString){let t=this.actives.bboxString.split(","),e={west:t[0],south:t[1],east:t[2],north:t[3]};this.MAP.fitBounds([[e.south,e.west],[e.north,e.east]])}this.MAP.createPane("pnBasemaps").style.zIndex=407,this.MAP.createPane("pnAdmin").style.zIndex=408,this.MAP.createPane("pnBuffered").style.zIndex=410,this.MAP.createPane("pnTracksValid").style.zIndex=412,this.MAP.createPane("pnTracksInvalid").style.zIndex=411,this.MAP.createPane("pnDebug").style.zIndex=409,this.MAP.createPane("pnCenterlines").style.zIndex=415,this.MAP.createPane("pnIso").style.zIndex=419,this.grpbasemaps||(this.grpbasemaps=new L.featureGroup({pane:"pnBasemaps"}).addTo(this.MAP)),this.grpadminghost||(this.grpadminghost=new L.featureGroup({pane:"pnAdmin"}).addTo(this.MAP)),this.grphistorytracksValid||(this.grphistorytracksValid=new L.featureGroup({pane:"pnTracksValid"}).addTo(this.MAP)),this.grphistorytracksInvalid||(this.grphistorytracksInvalid=new L.featureGroup({pane:"pnTracksInvalid"}).addTo(this.MAP)),this.grpcenterlines||(this.grpcenterlines=new L.featureGroup({pane:"pnCenterlines"}).addTo(this.MAP)),this.grpadmin||(this.grpadmin=new L.featureGroup({pane:"pnAdmin"}).addTo(this.MAP));let e=this.$_.findWhere(this.baseMaps,{handle:this.actives.baseMap}).urii;this.grpbasemaps.addLayer(new L.TileLayer(e)),this.grpbuffered||(this.grpbuffered=new L.featureGroup({pane:"pnBuffered"}).addTo(this.MAP),this.layers.push({handle:"grpbuffered",on:!1,abbrev:"hstb",klass:"icon-noun_buffer"})),this.grpdebug||(this.grpdebug=new L.featureGroup({pane:"pnDebug"}).addTo(this.MAP)),this.grpisotracks||(this.grpisotracks=new L.featureGroup({pane:"pnIso"}).addTo(this.MAP),this.layers.push({handle:"grpisotracks",on:!1,abbrev:"iso",klass:"icon-noun_binoculars"})),axios.get("static/brookline-outline.geojson").then(t=>{this.border=t.data}).catch(t=>{this.konsole=[{msg:t,klass:"error",timeout:20,sender:"axios.catch.outline"}]}),axios.get("static/brookline.geojson").then(t=>{L.geoJSON(t.data,{style:this._STILE("ghost"),snapIgnore:!0}).addTo(this.grpadminghost)}).catch(t=>{this.konsole=[{msg:t,klass:"error",timeout:20,sender:"axios.catch.brookline"}]}),t.getJSON("static/brookline-osm-centerlines.geojson",t=>{L.geoJSON(t,{style:this._STILE("centerlines")}).addTo(this.grpcenterlines),this.meta.centerlinesLength=this.$TURFLENGTH(this.grpcenterlines.toGeoJSON())}),this.loadings.app=!1,this.$nextTick(()=>{this._GETHISTORY()}),window.V=this,console.log(window.V)},computed:{cmpIncludedTrackNames:function(){return this.actives.rideKey?this.$_.pluck(this.$_.filter(this.menus.tracks,t=>new Date(t.trackTime).valueOf()<=new Date(this._GETACTIVERIDEKEYOB().properties.time).valueOf()),"trackName"):this.$_.pluck(this.menus.tracks,"trackName")},cmpTrackHistory:function(){return[]}},data:()=>({MAP:null,menus:{tracks:[]},border:null,debug:{},rideIso:null,liveFilter:{string:null},actives:{baseMap:null,rideKey:null,rideIso:null},baseMaps:[{name:"Stamen Toner Lite",handle:"stamen_toner_lite",urii:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}@2x.png",thmb:"https://stamen-tiles-c.a.ssl.fastly.net/toner-lite/18/79279/96968@2x.png",hue:"light"},{name:"Stamen Terrain",handle:"stamen_terrain",urii:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}@2x.png",thmb:"https://stamen-tiles-b.a.ssl.fastly.net/terrain/16/19819/24242@2x.png",hue:"light"},{name:"Google Hybrid",handle:"google_hybrid",urii:"https://mt3.google.com/vt/lyrs=y&x={x}&y={y}&z={z}",thmb:"https://mt3.google.com/vt/lyrs=y&x=79279&y=96968&z=18",hue:"dark"},{name:"OpenCycleMap",handle:"ocm",urii:"https://tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",thmb:"https://tile.thunderforest.com/cycle/18/79279/96968.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",hue:"dark"},{name:"Pioneer",handle:"ocm_pioneer",urii:"https://tile.thunderforest.com/pioneer/{z}/{x}/{y}.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",thmb:"https://tile.thunderforest.com/pioneer/18/79279/96968.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",hue:"light"},{name:"Mobile Atlas",handle:"ocm_mobile",urii:"https://tile.thunderforest.com/mobile-atlas/{z}/{x}/{y}.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",thmb:"https://tile.thunderforest.com/mobile-atlas/18/79279/96968.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",hue:"light"},{name:"Carto Positron",handle:"carto_positron",urii:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",thmb:"https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/18/79279/96968.png",hue:"light"},{name:"Carto Dark Matter",handle:"carto_darkmatter",urii:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png",thmb:"https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/18/79279/96968.png",hue:"light"},{name:"Spinal Map",handle:"ocm_spinal",urii:"https://tile.thunderforest.com/spinal-map/{z}/{x}/{y}.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",thmb:"https://tile.thunderforest.com/spinal-map/18/79279/96968.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",hue:"dark"}],layers:[],meta:{within:!0,been:!0,centerlinesLength:0,historyLengthValid:0,historyLengthInvalid:0,traceLength:0,trackmeta:[]},konsole:[],page:{title:"ebl.dshbrd",splayed:!1},modals:{credits:!1},loadings:{app:!1},tracks:{history:[],buffered:null},credits:["routing: openrouteservice.org | OpenStreetMap contributors","buffered tracks icon: outline by Jellycons from the Noun Project","tracks icon: route by Andrejs Kirma from the Noun Project","tracks review icon: Test Tube by Icon Island from the Noun Project","proposed route icon: Vector by logan from the Noun Project","isolated track icon: Binoculars by praveen patchu from the Noun Project"],classes:{armygreen:"rgba(75, 83, 32, 1)",persimmon:"rgba(236, 88, 0, 1)",darksienna:"rgba(51, 15, 10, 1)",flax:"rgba(239, 221, 141, 1)",lemonyellowcrayola:"rgba(244, 253, 175, 1)",naplesyellow:"#F8E16C",eblwhite:"rgb(233, 233, 233)",celadonblue:"rgba(36, 123, 160, 1)",skybluecrayola:"rgba(120, 227, 253, 1)",barnred:"rgba(111, 26, 7, 1)"}}),methods:{_SETRIDEISO:function(){console.log("_SETRIDEISO"),this.actives.rideIso?this.rideIso={type:"FeatureCollection",name:`Isolated Ride ${this.actives.rideKey}`,crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:this.$_.flatten(this.$_.filter(this.tracks.history.features,t=>t.properties.name==this.actives.rideKey))}:this.rideIso=null,this.grpisotracks.bringToFront()},_MAPRIDEISO:function(){console.log("_mapRIDEISO"),this.grpisotracks.clearLayers(),this.rideIso&&(L.geoJSON(this.rideIso,{style:this._STILE("iso")}).addTo(this.grpisotracks),this.grpisotracks.bringToFront(),this._LAUDIT("grpisotracks",!0)),this.grpisotracks.bringToFront()},_GETACTIVERIDEKEYOB:function(){if(this.tracks.history)return this.$_.find(this.tracks.history.features,t=>t.properties.name==this.actives.rideKey)},_STILE:function(t,e){this.$MOMENT("2020-10-12T12:00:11Z").unix(),this.$MOMENT().unix();switch(t){case"brookline":return{weight:5,opacity:.7,color:"rgba(239, 221, 141, 1)",fill:!1,fillOpacity:.6};case"incomingDefault":return{color:"rgba(236, 88, 0, 1)",fill:!1};case"centerlines":return{color:"#4aa",fill:!1,width:1,opacity:0};case"trace":return{dashArray:"2 5 10",color:"#87D100",fill:!1,weight:12,opacity:.8};case"untraversed":return{color:"#0D7CD6",fillColor:"#0D7CD6",fill:!0,weight:2,opacity:.88};case"incomingReturn":return{color:"rgba(120, 227, 253, 1)",fill:!1,dashArray:"2 5 10",opacity:.9,width:5,weight:8};case"iso":return{color:"rgba(120, 227, 253, 1)",fill:!1,dashArray:"2 5 10",opacity:.9,width:4,weight:8};case"incomingProposed":return{color:"rgba(36, 123, 160, 1)",fill:!1,dashArray:"5 10 2",opacity:.9,width:5,weight:8};case"proposalBuffer":return{color:"rgba(36, 123, 160, 1)",fill:!0,opacity:.2};case"buffer":return{color:"rgb(236, 88, 0)",fill:!0,fillOpacity:.3,opacity:.5};case"trackvalid":return{width:5,color:"rgba(36, 123, 160, 1)",fill:!1,opacity:.9};case"trackinvalid":return{width:5,color:"rgba(111, 26, 7, 1)",fill:!1,opacity:.9};case"incomingHistory":return{color:"rgb(51, 15, 10)",fill:!1,opacity:.1};case"incomingDefault":return{color:`rgb(${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)})`,fill:!1,opacity:.6};case"start":return{radius:8,fillColor:"rgba(75, 83, 32, 1)",color:"rgba(75, 83, 32, 1)",weight:1,opacity:1,fillOpacity:1};case"finish":return{radius:8,fillColor:"rgba(111, 26, 7, 1)",color:"rgba(111, 26, 7, 1)",weight:1,opacity:1,fillOpacity:1};case"debug":return{radius:18,fillColor:"rgb(44,44,44)",color:"rgb(11,11,11)",weight:5,opacity:1,fillOpacity:.5};case"ghost":return{radius:1,fillColor:"rgb(44,44,44)",color:"rgb(55,11,55)",weight:2,opacity:.3,fillOpacity:.1};case"via":return{radius:6,fillColor:"rgb(233,233,233)",color:"rgb(11,11,11)",weight:5,opacity:1,fillOpacity:1};case"online":return{width:6,color:"#93E600",weight:5,opacity:1,fill:!1};case"linz":return{color:`rgba(${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},1)`,fillColor:`rgba(${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},1)`,fill:!1};default:return{color:`rgba(${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.random()})`,fillColor:`rgba(${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.random()})`,fill:!0,fillOpacity:Math.random()}}},_GETFILTEREDTRACKS:function(){let t=this.$_.clone(this.tracks.history);return this._GETACTIVERIDEKEYOB()&&(t.features=this.$_.filter(t.features,t=>new Date(t.properties.time).valueOf()<=new Date(this._GETACTIVERIDEKEYOB().properties.time).valueOf())),t},_CHARTPIECOMPLETE:function(t){let e=null,s={"done (excluding disqualifieds)":this.meta.historyLengthValid,remaining:this.meta.centerlinesLength-this.meta.historyLengthValid};switch(t){case"data":e=s;break;case"colors":e=[this.classes.persimmon,"rgba(75, 83, 32, .5)"];break;default:e=s}return e},_BANNERCO:function(t){let e=null;switch(t){case"borderDistance":e=this.meta.within?"has-text-ebl-banner-info":"has-text-ebl-important";break;case"donePrior":case"doneToday":case"readings":e=this.meta.within?"has-text-ebl-banner-info":"has-text-ebl-notso-important";break;default:e="has-text-ebl-banner-info"}return e},_GETHISTORY:function(){this.loadings.app=!0,t.getJSON("static/ebl.geojson",t=>{this.loadings.app=!1,this.tracks.history=t})},_MAPHISTORY:function(){this.grphistorytracksValid.clearLayers(),this.grphistorytracksInvalid.clearLayers(),this._GETFILTEREDTRACKS()&&this._GETFILTEREDTRACKS().features.length>0&&(this.loadings.app=!0,this.$_.each(this._GETFILTEREDTRACKS().features,t=>{"winn"==t.properties.winout?L.geoJSON(t,{style:this._STILE("trackvalid",t.properties.time)}).bindPopup(t=>`<h5 class="is-size-5">${t.feature.properties.name}</h5>`).addTo(this.grphistorytracksValid).on("click",t=>{this.actives.rideKey=t.layer.feature.properties.name}):L.geoJSON(t,{style:this._STILE("trackinvalid",t.properties.time)}).bindPopup(t=>`<h5 class="is-size-5">${t.feature.properties.name}</h5>`).addTo(this.grphistorytracksInvalid).on("click",t=>{this.actives.rideKey=t.layer.feature.properties.name})}),this.actives.bboxString||this.MAP.fitBounds(this.grphistorytracksValid.getBounds()),this.loadings.app=!1),this.$nextTick(()=>{this._META("history")})},keyMonitor:function(t){t.altKey&&(this.page.splayed=!this.page.splayed)},_SETMENUS:function(){this.menus.tracks=this.$_.map(this.$_.groupBy(this.$_.map(this.tracks.history.features,t=>t.properties),"name"),t=>({trackName:this.$_.first(this.$_.pluck(t,"name")),trackTime:this.$_.first(this.$_.pluck(t,"time"))}))},_META:function(t){this.meta.historyLengthValid=this.$TURFLENGTH(this.grphistorytracksValid.toGeoJSON()),this.meta.historyLengthInvalid=this.$TURFLENGTH(this.grphistorytracksInvalid.toGeoJSON())},_METAOG:function(t){switch(console.log("this.grphistorytracksValid.getLayers().length",this.grphistorytracksValid.getLayers().length),this.grpdebug.clearLayers(),t){case"history":if(this.border&&this.grphistorytracksValid.getLayers().length>0){let t=this.$_.flatten(this.$TURFCOMBINE(this.grphistorytracksValid.toGeoJSON()).features[0].geometry.coordinates,1),e=this.$TURFH.lineString(t);console.log("megaLine length",this.$TURFLENGTH(e));let s=this.$TURF_linesplit(e,this.border.features[0]);console.log("split length",this.$TURFLENGTH(s)),console.log("split:",s);let i=0,a=0;this.$_.each(s.features,(t,e)=>{console.log("fea",t);let s=this.$TURF_booleanwithin(this.$TURF_centroid(t),this.grpadminghost.toGeoJSON().features[0]);s?L.geoJSON(t,{style:this._STILE("linz"),onEachFeature:function(t,e){t.on("click",function(){t.setStyle({width:6,color:"#93E600",weight:5,opacity:1,fill:!1})})}}).addTo(this.grpdebug):L.geoJSON(t,{style:this._STILE("debug"),onEachFeature:function(t,e){t.on("click",function(){t.setStyle({width:6,color:"#93E600",weight:5,opacity:1,fill:!1})})}}).addTo(this.grpdebug),s?i+=this.$TURFLENGTH(t,{units:"kilometers"}):a+=this.$TURFLENGTH(t,{units:"kilometers"})}),console.log("pre.this.meta.historyLengthValid",this.meta.historyLengthValid),console.log("pre.this.meta.historyLengthInvalid",this.meta.historyLengthInvalid),this.meta.historyLengthValid=i,console.log("lengthValid",i),this.meta.historyLengthInvalid=a,console.log("lengthInvalid",a),console.log("post.this.meta.historyLengthValid",this.meta.historyLengthValid),console.log("post.this.meta.historyLengthInvalid",this.meta.historyLengthInvalid)}else console.log("border and/or history not ready")}},_BUFFERTRACKS:function(t){this.grpbuffered.clearLayers(),this.tracks.buffered=this.$TURFBUFFER(this.grphistorytracksValid.toGeoJSON(),10,{units:"meters"})},_MAPBUFFEREDTRACKS:function(t){L.geoJSON(this.tracks.buffered,{style:t=>this._STILE("buffer",t)}).addTo(this.grpbuffered),this.grphistorytracksValid,this._LAUDIT("grpbuffered",!0),this.grpisotracks.bringToFront()},_SETROUTE:function(){let t={ridekey:this.actives.rideKey?this.actives.rideKey:"$",rideiso:this.actives.rideIso?"S":"$",basemap:this.actives.baseMap?this.actives.baseMap:"$",splayed:this.page.splayed?"S":"$",query:this.actives.queryString?this.actives.queryString:"$",bbox:this.actives.bboxString?this.actives.bboxString:"$"};this.$router.push({params:t})},_LAUDIT:function(t,e){let s=null;switch(t){case"grpisotracks":e?(this.MAP.addLayer(this.grpisotracks),this.$_.findWhere(this.layers,{handle:t}).on=!0):((s=this.$_.findWhere(this.layers,{handle:t}).on)?this.MAP.removeLayer(this.grpisotracks):this.MAP.addLayer(this.grpisotracks),this.$_.findWhere(this.layers,{handle:t}).on=!s);break;case"grphistorytracks":e?(this.MAP.addLayer(this.grphistorytracksValid),this.$_.findWhere(this.layers,{handle:t}).on=!0):((s=this.$_.findWhere(this.layers,{handle:t}).on)?this.MAP.removeLayer(this.grphistorytracksValid):this.MAP.addLayer(this.grphistorytracksValid),this.$_.findWhere(this.layers,{handle:t}).on=!s);break;case"grpbuffered":e?(this.MAP.addLayer(this.grpbuffered),this.$_.findWhere(this.layers,{handle:t}).on=!0):((s=this.$_.findWhere(this.layers,{handle:t}).on)?this.MAP.removeLayer(this.grpbuffered):this.MAP.addLayer(this.grpbuffered),this.$_.findWhere(this.layers,{handle:t}).on=!s);break;case"grpcenterlines":e?(this.MAP.addLayer(this.grpcenterlines),this.$_.findWhere(this.layers,{handle:t}).on=!0):((s=this.$_.findWhere(this.layers,{handle:t}).on)?this.MAP.removeLayer(this.grpcenterlines):this.MAP.addLayer(this.grpcenterlines),this.$_.findWhere(this.layers,{handle:t}).on=!s);break;case"grpdebug":e?(this.MAP.addLayer(this.grpdebug),this.$_.findWhere(this.layers,{handle:t}).on=!0):((s=this.$_.findWhere(this.layers,{handle:t}).on)?this.MAP.removeLayer(this.grpdebug):this.MAP.addLayer(this.grpdebug),this.$_.findWhere(this.layers,{handle:t}).on=!s)}}},watch:{loadings:{deep:!0,handler:function(t,e){this.$_.contains(this.$_.values(this.loadings),!0)?this.$refs.topProgress.start():this.$refs.topProgress.done()}},"tracks.buffered":{handler:function(t,e){}},"page.splayed":{handler:function(t,e){this._SETROUTE()}},"tracks.history":{handler:function(t,e){this._SETMENUS(),this._MAPHISTORY()}},"actives.baseMap":{handler:function(t,e){let s=this.$_.findWhere(this.baseMaps,{handle:this.actives.baseMap}).urii;s&&(this.grpbasemaps.clearLayers(),this.grpbasemaps.addLayer(new L.TileLayer(s))),this._SETROUTE()}},"actives.rideKey":{handler:function(t,e){this.tracks.history&&this._MAPHISTORY(),this.actives.rideIso=!0,this._SETROUTE()}},"actives.rideIso":{handler:function(t,e){this.tracks.history&&this._SETRIDEISO(),this._SETROUTE()}},rideIso:{handler:function(t,e){this._MAPRIDEISO()}}}}}).call(e,s("7t+N"))},"1/Mr":function(t,e){t.exports={mode:"1616",debug:!1,apiH:"localhost",apiP:"3030",storeU:"https://everybline-1aae.restdb.io/rest",storeK:"5f7b0b29ed97473d24a5cfc1",ORSKey:"5b3ce3597851110001cf62486c6cb6cfcfc74b1aa529cfe60f07fedf"}},Ldmt:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("FcSG"),a=(s.n(i),s("z8jB")),r=s.n(a),n=s("cK3Q"),o=(s.n(n),s("bMd6")),l=(s.n(o),s("m5mp"));s.n(l);function h(t){switch(t.type){case"Polygon":return r()(t)>1?t:null;case"MultiPolygon":var e=[];if(Object(l.flattenEach)(t,function(t){r()(t)>1&&e.push(t.geometry.coordinates)}),e.length)return{type:"MultiPolygon",coordinates:e}}}e.default=function(t,e){var s=Object(o.getGeom)(t),a=Object(o.getGeom)(e),r=t.properties||{};if(s=h(s),a=h(a),!s)return null;if(!a)return Object(n.feature)(s,r);var l=i.diff(s.coordinates,a.coordinates);return 0===l.length?null:1===l.length?Object(n.polygon)(l[0],r):Object(n.multiPolygon)(l,r)}},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=s("VU/8")({name:"app"},a,!1,function(t){s("qrve")},null,null).exports,n=s("1/Mr"),o=s.n(n),l=s("/ocq"),h=s("/U+F"),c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[s("vue-headful",{attrs:{title:t.page.title,description:"fxsxxxrrrre"}}),t._v(" "),s("vue-topprogress",{ref:"topProgress",attrs:{color:"rgba(236, 88, 0, 1)"}}),t._v(" "),s("div",{attrs:{id:"map"}}),t._v(" "),s("nav",{staticClass:"navbar",attrs:{role:"navigation","aria-label":"main navigation"}},[s("nav",{staticClass:"level is-mobile",attrs:{id:"ebl-brand"}},[s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{},[t._v(t._s(t.$_.map(t.page.title,function(t){return Math.floor(10*Math.random())%2==0?t.toUpperCase():t}).join(""))+"\n            ")])])]),t._v(" "),t._m(0)])]),t._v(" "),s("div",{staticClass:"columns p-0 m-0 is-relative",attrs:{id:"konsole-wrapper"}},[t.konsole.length>0?s("div",{staticClass:"column is-full is-size-7 p-2",attrs:{id:"konsole"}},t._l(t.konsole,function(e){return s("div",{class:["level-item","has-text-centered",e.klass,"faded"+e.timeout],attrs:{id:"konsole-copy"}},[s("div",[s("p",[t._v(t._s(e.msg))])])])}),0):t._e()]),t._v(" "),s("div",{class:["container","p-6","is-fullhd",t.page.splayed?"is-splayed":""],attrs:{id:"ebl-dashboard-wrapper"}},[s("div",{staticClass:"columns"}),t._v(" "),t.page.splayed?t._e():s("div",{staticClass:"tile is-ancestor"},[s("div",{staticClass:"tile is-vertical is-8"},[t._m(1),t._v(" "),s("div",{staticClass:"tile"},[s("div",{staticClass:"tile is-parent is-vertical"},[s("article",{staticClass:"tile is-child notification has-text-centered"},[s("p",{staticClass:"title"},[t._v("total km.")]),t._v(" "),s("p",{class:["is-size-1","title","ebl-dash-item"]},[t._v(t._s(t.meta.centerlinesLength.toFixed(1)))]),t._v(" "),s("p",{staticClass:"has-text-grey-lighter"},[t._v("OSM export 2020.Oct.14")])]),t._v(" "),s("article",{staticClass:"tile is-child notification has-text-centered"},[s("p",{staticClass:"title"},[t._v("km complete")]),t._v(" "),t._GETACTIVERIDEKEYOB()?s("p",{staticClass:"ebl-filter-warning"},[t._v("as of "+t._s(t.$MOMENT(t._GETACTIVERIDEKEYOB().properties.time).format("YY.MMM.DD")))]):t._e(),t._v(" "),s("p",{class:["title","ebl-dash-item"]},[t._v(t._s(t.meta.historyLengthValid.toFixed(1)))]),t._v(" "),s("p",{staticClass:"has-text-grey-lighter"},[t._v("within town border")])])]),t._v(" "),s("div",{staticClass:"tile is-parent pt-3"},[s("article",{staticClass:"tile is-child notification has-text-centered pt-6"},[s("p",{staticClass:"title mt-3"},[t._v("% complete")]),t._v(" "),s("pie-chart",{attrs:{height:"200px",legend:!1,donut:!0,data:t._CHARTPIECOMPLETE("data"),colors:t._CHARTPIECOMPLETE("colors")}}),t._v(" "),s("p",{class:["mt-2","title","ebl-dash-item"]},[t._v(t._s((t.meta.historyLengthValid/t.meta.centerlinesLength*100).toFixed(1)))]),t._v(" "),t._GETACTIVERIDEKEYOB()?s("p",{staticClass:"ebl-filter-warning"},[t._v("as of "+t._s(t.$MOMENT(t._GETACTIVERIDEKEYOB().properties.time).format("YY.MMM.DD")))]):t._e()],1)])]),t._v(" "),s("div",{staticClass:"tile is-parent"},[s("article",{staticClass:"tile is-child notification has-text-centered"},[s("p",{staticClass:"title"},[t._v("disqualified")]),t._v(" "),s("div",{staticClass:"content"},[s("p",{class:["title","ebl-dash-item"]},[t._v(t._s(t.meta.historyLengthInvalid.toFixed(1))+"km ("+t._s((t.meta.historyLengthInvalid/t.meta.historyLengthValid*100).toFixed(1))+" % of ttl riddn)")]),t._v(" "),t._GETACTIVERIDEKEYOB()?s("p",{staticClass:"ebl-filter-warning"},[t._v("as of "+t._s(t.$MOMENT(t._GETACTIVERIDEKEYOB().properties.time).format("YY.MMM.DD")))]):t._e()]),t._v(" "),s("p",{staticClass:"has-text-grey-lighter"},[t._v("segments determined to be outta town")])])])]),t._v(" "),s("div",{staticClass:"tile is-parent"},[s("article",{staticClass:"tile is-child notification has-text-centered"},[s("div",{staticClass:"content"},[s("p",{staticClass:"title"},[t._v("tracks ("+t._s(t.menus.tracks.length)+")")]),t._v(" "),s("div",{staticClass:"content"},[s("nav",{staticClass:"xpanel",attrs:{id:"trackHistoryPanel"}},[s("p",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.liveFilter.string,expression:"liveFilter.string"}],staticClass:"input",attrs:{type:"text",placeholder:""},domProps:{value:t.liveFilter.string},on:{input:function(e){e.target.composing||t.$set(t.liveFilter,"string",e.target.value)}}}),t._v(" "),t._m(2),t._v(" "),s("i",{class:["fas"," fa-slash"," ebl-bt"," mt-2"," mb-0",t.actives.rideKey?"":"ebl-is-disabled"],on:{click:function(e){t.actives.rideKey=null}}})]),t._v(" "),t._l(t.menus.tracks,function(e){return s("a",{class:[t.$_.contains(t.cmpIncludedTrackNames,e.trackName)?"included":"","panel-block","is-ac","waye"],on:{click:function(s){s.preventDefault(),t.actives.rideKey=e.trackName}}},[s("span",{staticClass:"panel-icon"},[s("i",{class:["ebl-bt",t.actives.rideKey==e.trackName?"fas fa-circle ebl-filter-warning":"far fa-circle"],attrs:{"aria-hidden":"true"}})]),t._v(t._s(e.trackName)+" "),s("span",{staticClass:"is-size-7 has-text-grey-lighter"},[t._v(" ("+t._s(t.$MOMENT(e.trackTime).format("YY.MMM.DD"))+")")])])})],2)])])])])]),t._v(" "),t.page.splayed?s("table",{staticClass:"table is-narrow"},[s("tbody",[s("tr",[s("th",[t._v("ttl.km")]),t._v(" "),s("td",[t._v(t._s(t.meta.centerlinesLength.toFixed(1)))])]),t._v(" "),t._m(3)])]):t._e()]),t._v(" "),s("footer",{staticClass:"footer pt-1 pb-1 has-text-centered"},[s("nav",{staticClass:"level is-mobile pl-2 pr-2",attrs:{id:"ebl-layers"}},[s("div",{staticClass:"level-left"},[s("div",{staticClass:"level-item"},t._l(t.layers,function(e){return s("a",{staticClass:"navbar-item",on:{click:function(s){if(!s.type.indexOf("key")&&t._k(s.keyCode,"default",void 0,s.key,void 0))return null;t._LAUDIT(e.handle)}}},[s("i",{class:[""+e.klass,e.on?"ebl-nav-on":""]},[s("span",{staticClass:"pl-2"},[t._v(t._s(e.abbrev))])])])}),0)]),t._v(" "),s("div",{staticClass:"level-right pb-2"},t._l(t.baseMaps,function(e){return s("figure",{staticClass:"image is-24x24 mr-2"},[s("img",{class:["bt_baseMap","is-rounded",e.handle==t.actives.baseMap?"active":""],attrs:{src:e.thmb},on:{click:function(s){t.actives.baseMap=e.handle}}})])}),0)])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"level-item has-text-centered"},[e("div")])},function(){var t=this.$createElement,e=this._self._c||t;return e("article",{staticClass:"tile"},[e("div",{staticClass:"title"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-left"},[e("i",{staticClass:"fas fa-search",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",[this._v("1")]),this._v(" "),e("td",[this._v("38")])])}]};var d=function(t){s("wAIY")},p=s("VU/8")(h.a,c,!1,d,null,null).exports,u=s("NsQv"),f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[s("vue-headful",{attrs:{title:t.page.title,description:"fxsxxxrrrre"}}),t._v(" "),s("vue-topprogress",{ref:"topProgress",attrs:{color:"rgba(236, 88, 0, 1)"}}),t._v(" "),s("div",{attrs:{id:"map"}}),t._v(" "),s("nav",{class:["navbar",t._BANNERBG],attrs:{role:"navigation","aria-label":"main navigation"}},[s("nav",{staticClass:"level is-mobile"},[s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{staticClass:"heading ebl-dash-heading"},[s("a",{staticClass:"navbar-item is-size-1",on:{click:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"default",void 0,e.key,void 0))return null;t.zpause=!t.zpause}}},[s("i",{class:[t.zpause?"fas fa-pause-circle ebl-nav-on":"far fa-pause-circle"]})])])])]),t._v(" "),s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{staticClass:"heading ebl-dash-heading"},[t._v("Ttl.km")]),t._v(" "),s("p",{class:["title","ebl-dash-item",t._BANNERCO("totalCenterlines")]},[t._v(t._s(Math.round(t.meta.centerlinesLength)))])])]),t._v(" "),s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{staticClass:"heading ebl-dash-heading"},[t._v("%Dn.")]),t._v(" "),s("p",{class:["title","ebl-dash-item",t._BANNERCO("donePrior")]},[t._v(t._s((t.meta.historyLengthValid/t.meta.centerlinesLength*100).toFixed(1)))])])]),t._v(" "),s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{staticClass:"heading ebl-dash-heading"},[t._v("dntdy.km")]),t._v(" "),s("p",{class:["title","ebl-dash-item",t._BANNERCO("doneToday")]},[t._v(t._s(t.meta.traceLength))])])]),t._v(" "),s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{staticClass:"heading ebl-dash-heading"},[t._v("#rDNgS.")]),t._v(" "),s("p",{class:["title","ebl-dash-item",t._BANNERCO("readings")]},[t._v(t._s(t.trace.length))])])])])]),t._v(" "),s("div",{staticClass:"columns p-0 m-0 is-relative",attrs:{id:"konsole-wrapper"}},[t.konsole.length>0?s("div",{staticClass:"column is-full is-size-7 p-2",attrs:{id:"konsole"}},t._l(t.konsole,function(e){return s("div",{class:["level-item","has-text-centered",e.klass,"faded"+e.timeout],attrs:{id:"konsole-copy"}},[s("div",[s("p",[t._v(t._s(e.msg))])])])}),0):t._e()]),t._v(" "),s("footer",{staticClass:"footer pt-1 pb-1 has-text-centered"},[s("nav",{staticClass:"level is-mobile pl-2 pr-2",attrs:{id:"ebl-layers"}},[s("div",{staticClass:"level-left"},[s("div",{staticClass:"level-item"},t._l(t.layers,function(e){return s("a",{staticClass:"navbar-item",on:{click:function(s){if(!s.type.indexOf("key")&&t._k(s.keyCode,"default",void 0,s.key,void 0))return null;t._LAUDIT(e.handle)}}},[s("i",{class:[""+e.klass,e.on?"ebl-nav-on":""]},[s("span",{staticClass:"pl-2"},[t._v(t._s(e.abbrev))])])])}),0)]),t._v(" "),s("div",{staticClass:"level-right pb-2"},t._l(t.baseMaps,function(e){return s("figure",{staticClass:"image is-24x24 mr-2"},[s("img",{class:["bt_baseMap","is-rounded",e.handle==t.actives.baseMap?"active":""],attrs:{src:e.thmb},on:{click:function(s){t.actives.baseMap=e.handle}}})])}),0)])])],1)},staticRenderFns:[]};var g=function(t){s("XBbL")},b=s("VU/8")(u.a,f,!1,g,null,null).exports;i.a.use(l.a);var m=new l.a({routes:[{path:"/trace",name:"EBLTracer",component:b},{path:"/:ridekey?/:rideiso?/:query?/:basemap?/:splayed?/:bbox?",name:"EBL",component:p}]}),y=s("PJh5"),v=s.n(y),_=s("rNNc"),k=s("WiKS"),T=s.n(k),M=s("oOQZ"),E=s.n(M),$=s("YeRc"),j=s("ikxi"),L=s.n(j);i.a.use($.a.use(L.a));const P=s("oCme"),O=s("9NYu"),w=s("dj2B"),C=s("y009").default,x=s("1UiH").default,R=s("7QBd").default,A=s("m5mp"),I=s("M07l").default,S=s("6CST").default,F=s("bEHx").default,N=s("iwmX").default,U=s("bEHx").default,z=s("Ldmt").default,D=s("2rhJ").default,B=s("KBgd").default,G=s("Ebq+").default,V=s("oEQs").default,H=s("EcKR").default,K=s("bz5O").default,J=s("a4kP").default,W=s("a4kP").default,Y=s("5GQ8").default,q=s("cx8s").default,X=s("HjdK").default,Q=s("WIsE").default,Z=s("tq8K").default,tt=s("k/sV").default,et=s("EGTr").default,st=s("7tTk").default,it=s("SUmV").default,at=s("cK3Q"),rt=s("m5mp"),nt=s("7sEF");i.a.component("vue-headful",T.a),i.a.use(_.a),i.a.use(E.a,{color:"rgba(236, 88, 0, 1)"}),i.a.config.productionTip=!1,Object.defineProperty(i.a.prototype,"$PENC",{value:O}),Object.defineProperty(i.a.prototype,"$MBFLEXPOLY",{value:P}),Object.defineProperty(i.a.prototype,"$HEREFLEX",{value:w}),Object.defineProperty(i.a.prototype,"$MOMENT",{value:v.a}),Object.defineProperty(i.a.prototype,"$TURF_flip",{value:W}),Object.defineProperty(i.a.prototype,"$TURF_centroid",{value:X}),Object.defineProperty(i.a.prototype,"$TURF_center",{value:q}),Object.defineProperty(i.a.prototype,"$TURF_pointtolinedistance",{value:it}),Object.defineProperty(i.a.prototype,"$TURF_nearestpoint",{value:U}),Object.defineProperty(i.a.prototype,"$TURF_lineintersect",{value:Q}),Object.defineProperty(i.a.prototype,"$TURF_linesplit",{value:tt}),Object.defineProperty(i.a.prototype,"$TURF_distance",{value:N}),Object.defineProperty(i.a.prototype,"$TURF_nearestpointonline",{value:st}),Object.defineProperty(i.a.prototype,"$TURF_booleanwithin",{value:K}),Object.defineProperty(i.a.prototype,"$TURF_booleanpointinpolygon",{value:H}),Object.defineProperty(i.a.prototype,"$TURF_bbox",{value:Y}),Object.defineProperty(i.a.prototype,"$TURF_bboxclip",{value:Z}),Object.defineProperty(i.a.prototype,"$TURFSIMPLE",{value:C}),Object.defineProperty(i.a.prototype,"$TURFEXPLODE",{value:G}),Object.defineProperty(i.a.prototype,"$TURF_polygontoline",{value:et}),Object.defineProperty(i.a.prototype,"$TURFCOMBINE",{value:F}),Object.defineProperty(i.a.prototype,"$TURFCLEAN",{value:x}),Object.defineProperty(i.a.prototype,"$TURFUNION",{value:J}),Object.defineProperty(i.a.prototype,"$TURFLENGTH",{value:R}),Object.defineProperty(i.a.prototype,"$TURFMETA",{value:A}),Object.defineProperty(i.a.prototype,"$TURFINTERSECT",{value:D}),Object.defineProperty(i.a.prototype,"$TURFBUFFER",{value:I}),Object.defineProperty(i.a.prototype,"$TURFH",{value:at}),Object.defineProperty(i.a.prototype,"$TURFM",{value:rt}),Object.defineProperty(i.a.prototype,"$TURFPTGRID",{value:S}),Object.defineProperty(i.a.prototype,"$TURFDIFF",{value:z}),Object.defineProperty(i.a.prototype,"$TURFENVELOPE",{value:B}),Object.defineProperty(i.a.prototype,"$TURFSAMPLE",{value:V}),Object.defineProperty(i.a.prototype,"$TOGEOJSON",{value:nt}),Object.defineProperty(i.a.prototype,"$CONFIG",{value:o.a}),new i.a({el:"#app",router:m,template:"<App/>",components:{App:r}})},NsQv:function(t,e,s){"use strict";(function(t){e.a={name:"evERyBlINE",created:function(){this.actives={baseMap:this.$route.params.basemap&&"$"!=this.$route.params.basemap?this.$route.params.basemap:"stamen_terrain"}},mounted:function(){navigator.geolocation.getCurrentPosition(t=>{this.konsole=[{timeout:20,klass:"has-text-info",msg:t.coords.latitude,sender:"if.geolocation"}]},t=>{this.konsole=[{timeout:20,klass:"has-text-error",msg:`nav.geo failed: ${t.message} (${t.code})`,sender:"if.geolocation.error"}]}),this.loadings.app=!0,this.konsole=[{msg:new Date,klass:"is-info",timeout:20,timeout:20}],this.MAP=new L.Map("map",{editable:!0,zoomControl:!1,center:[42,-72],attributionControl:!1,zoom:11});this.MAP.createPane("pnBasemaps").style.zIndex=407,this.MAP.createPane("pnAdmin").style.zIndex=408,this.MAP.createPane("pnBuffered").style.zIndex=410,this.MAP.createPane("pnTracks").style.zIndex=412,this.MAP.createPane("pnDebug").style.zIndex=409,this.MAP.createPane("pnCenterlines").style.zIndex=415,this.MAP.createPane("pnTrace").style.zIndex=417,this.grpbasemaps||(this.grpbasemaps=new L.featureGroup({pane:"pnBasemaps"}).addTo(this.MAP)),this.grpadminghost||(this.grpadminghost=new L.featureGroup({pane:"pnAdmin"}).addTo(this.MAP)),this.grptrace||(this.grptrace=new L.featureGroup({pane:"pnTrace"}).addTo(this.MAP)),this.grphistorytracks||(this.grphistorytracks=new L.featureGroup({pane:"pnTracks"}).addTo(this.MAP)),this.grpcenterlines||(this.grpcenterlines=new L.featureGroup({pane:"pnCenterlines"}).addTo(this.MAP)),this.grpadmin||(this.grpadmin=new L.featureGroup({pane:"pnAdmin"}).addTo(this.MAP));let e=this.$_.findWhere(this.baseMaps,{handle:this.actives.baseMap}).urii;this.grpbasemaps.addLayer(new L.TileLayer(e)),this.grpbuffered||(this.grpbuffered=new L.featureGroup({pane:"pnBuffered"}).addTo(this.MAP),this.layers.push({handle:"grpbuffered",on:!1,abbrev:"hstb",klass:"icon-noun_buffer"})),this.grpdebug||(this.grpdebug=new L.layerGroup({pane:"pnDebug"}).addTo(this.MAP)),axios.get("static/brookline-outline-buffer.geojson").then(t=>{L.geoJSON(t.data,{style:this._STILE("brookline"),snapIgnore:!0}).addTo(this.grpadmin),this.MAP.fitBounds(this.grpadmin.getBounds())}).catch(t=>{this.konsole=[{msg:t,klass:"error",timeout:20,sender:"axios.catch.outline-buffer"}]}),axios.get("static/brookline-outline.geojson").then(t=>{this.border=t.data}).catch(t=>{this.konsole=[{msg:t,klass:"error",timeout:20,sender:"axios.catch.outline"}]}),axios.get("static/brookline.geojson").then(t=>{L.geoJSON(t.data,{style:this._STILE("ghost"),snapIgnore:!0}).addTo(this.grpadminghost)}).catch(t=>{this.konsole=[{msg:t,klass:"error",timeout:20,sender:"axios.catch.brookline"}]}),t.getJSON("static/brookline-osm-centerlines.geojson",t=>{L.geoJSON(t,{style:this._STILE("centerlines")}).addTo(this.grpcenterlines),this.meta.centerlinesLength=this.$TURFLENGTH(this.grpcenterlines.toGeoJSON())}),this.loadings.app=!1,this._TRACE(),this.$nextTick(()=>{this._GETHISTORY()})},computed:{_BANNERBG:function(){let t=null;switch(!0){case!this.meta.within:t="ebl-bg-without";break;case this.meta.distanceToBorder<=100:t="ebl-bg-nearing";break;default:t="ebl-bg-within"}return t}},data:()=>({MAP:null,zpause:!1,border:null,debug:{},actives:{baseMap:null},baseMaps:[{name:"Stamen Toner Lite",handle:"stamen_toner_lite",urii:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}@2x.png",thmb:"https://stamen-tiles-c.a.ssl.fastly.net/toner-lite/18/79279/96968@2x.png",hue:"light"},{name:"Stamen Terrain",handle:"stamen_terrain",urii:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}@2x.png",thmb:"https://stamen-tiles-b.a.ssl.fastly.net/terrain/16/19819/24242@2x.png",hue:"light"},{name:"Google Hybrid",handle:"google_hybrid",urii:"https://mt3.google.com/vt/lyrs=y&x={x}&y={y}&z={z}",thmb:"https://mt3.google.com/vt/lyrs=y&x=79279&y=96968&z=18",hue:"dark"},{name:"OpenCycleMap",handle:"ocm",urii:"https://tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",thmb:"https://tile.thunderforest.com/cycle/18/79279/96968.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",hue:"dark"},{name:"Pioneer",handle:"ocm_pioneer",urii:"https://tile.thunderforest.com/pioneer/{z}/{x}/{y}.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",thmb:"https://tile.thunderforest.com/pioneer/18/79279/96968.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",hue:"light"},{name:"Mobile Atlas",handle:"ocm_mobile",urii:"https://tile.thunderforest.com/mobile-atlas/{z}/{x}/{y}.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",thmb:"https://tile.thunderforest.com/mobile-atlas/18/79279/96968.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",hue:"light"},{name:"Carto Positron",handle:"carto_positron",urii:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",thmb:"https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/18/79279/96968.png",hue:"light"},{name:"Carto Dark Matter",handle:"carto_darkmatter",urii:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png",thmb:"https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/18/79279/96968.png",hue:"light"},{name:"Spinal Map",handle:"ocm_spinal",urii:"https://tile.thunderforest.com/spinal-map/{z}/{x}/{y}.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",thmb:"https://tile.thunderforest.com/spinal-map/18/79279/96968.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",hue:"dark"}],traceFake:[{lng:-71.1276028845577,lat:42.348776160060915,order:0},{lng:-71.12790036129813,lat:42.348157821774485,order:1},{lng:-71.12816065344602,lat:42.34767688779104,order:2},{lng:-71.12888575300082,lat:42.34752573635061,order:3},{lng:-71.12946211418542,lat:42.34846012125222,order:4},{lng:-71.13005706766629,lat:42.34927082631071,order:5},{lng:-71.13085653640621,lat:42.35016396384663,order:6},{lng:-71.12987114470351,lat:42.35038381113987,order:7},{lng:-71.12756569996516,lat:42.350315108943335,order:8},{lng:-71.12539040130072,lat:42.351221971891185,order:9},{lng:-71.1245909325608,lat:42.350988387231396,order:10},{lng:-71.12587380100392,lat:42.35005403991167,order:11},{lng:-71.12713807715078,lat:42.34955937982539,order:12},{lng:-71.12795613818697,lat:42.348776160060915,order:13}],trace:[],layers:[],meta:{within:!0,been:!0,distanceToBorder:999,centerlinesLength:0,historyLengthTotal:0,historyLengthValid:0,historyLengthInvalid:0,traceLength:0},konsole:[],page:{title:"eBl:tracer"},modals:{credits:!1},loadings:{app:!1},tracks:{history:[],buffered:null}}),methods:{_STILE:function(t,e){this.$MOMENT("2020-10-12T12:00:11Z").unix(),this.$MOMENT().unix();switch(t){case"brookline":return{weight:5,opacity:.7,color:"rgba(239, 221, 141, 1)",fill:!1,fillOpacity:.6};case"incomingDefault":return{color:"rgba(236, 88, 0, 1)",fill:!1};case"centerlines":return{color:"#4aa",fill:!1,width:1,opacity:0};case"trace":return{dashArray:"2 5 10",color:"#87D100",fill:!1,weight:12,opacity:.8};case"untraversed":return{color:"#0D7CD6",fillColor:"#0D7CD6",fill:!0,weight:2,opacity:.88};case"incomingReturn":return{color:"rgba(120, 227, 253, 1)",fill:!1,dashArray:"2 5 10",opacity:.9,width:5,weight:8};case"iso":return{color:"rgba(120, 227, 253, 1)",fill:!1,dashArray:"2 5 10",opacity:.6,width:5,weight:8};case"incomingProposed":return{color:"rgba(36, 123, 160, 1)",fill:!1,dashArray:"5 10 2",opacity:.9,width:5,weight:8};case"proposalBuffer":return{color:"rgba(36, 123, 160, 1)",fill:!0,opacity:.2};case"buffer":return{color:"rgb(236, 88, 0)",fill:!0,fillOpacity:.3,opacity:.5};case"trackvalid":return{color:"rgba(36, 123, 160, 1)",fill:!1,opacity:1};case"trackinvalid":return{color:"rgba(136, 23, 60, 1)",fill:!1,opacity:1};case"incomingHistory":return{color:"rgb(51, 15, 10)",fill:!1,opacity:.1};case"incomingDefault":return{color:`rgb(${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)})`,fill:!1,opacity:.6};case"start":return{radius:8,fillColor:"rgba(75, 83, 32, 1)",color:"rgba(75, 83, 32, 1)",weight:1,opacity:1,fillOpacity:1};case"finish":return{radius:8,fillColor:"rgba(111, 26, 7, 1)",color:"rgba(111, 26, 7, 1)",weight:1,opacity:1,fillOpacity:1};case"debug":return{radius:18,fillColor:"rgb(44,44,44)",color:"rgb(11,11,11)",weight:5,opacity:1,fillOpacity:.5};case"ghost":return{radius:1,fillColor:"rgb(44,44,44)",color:"rgb(55,11,55)",weight:2,opacity:.3,fillOpacity:.1};case"via":return{radius:6,fillColor:"rgb(233,233,233)",color:"rgb(11,11,11)",weight:5,opacity:1,fillOpacity:1};default:return{color:`rgba(${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.random()})`,fillColor:`rgba(${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.random()})`,fill:!0,fillOpacity:Math.random()}}},_FAKETRACE:function(){this._META("history");var t=0;setInterval(()=>{let e=this.traceFake[t];t++,this.trace.push(e||null)},5e3)},_BANNERCO:function(t){let e=null;switch(t){case"borderDistance":e=this.meta.within?"has-text-ebl-banner-info":"has-text-ebl-important";break;case"donePrior":case"doneToday":case"readings":e=this.meta.within?"has-text-ebl-banner-info":"has-text-ebl-notso-important";break;default:e="has-text-ebl-banner-info"}return e},_TRACE:function(){navigator.geolocation.watchPosition(t=>{this.konsole=[{timeout:20,klass:"has-text-info",msg:t.coords.latitude,sender:"if.geolocation"}],this.trace.push({lat:t.coords.latitude,lng:t.coords.longitude})},t=>{this.konsole=[{timeout:20,klass:"has-text-error",msg:`nav.geo failed: ${t.message} (${t.code})`,sender:"if.geolocation.error"}]}),this._META("history")},_MAPTRACE:function(){if(this.trace.length>0){this.grptrace.clearLayers();let t=this.$_.last(this.$_.compact(this.trace)),e=this.$TURFH.point([t.lng,t.lat]),s=this.$TURFBUFFER(e,100,{units:"meters"});if(this.trace.length>1){let t=this.$TURFH.lineString(this.$_.map(this.$_.compact(this.trace),t=>[t.lng,t.lat])),i=this.$TURFBUFFER(t,10,{units:"meters"});L.geoJSON(t,{style:this._STILE("trace")}).addTo(this.grptrace),this.zpause||this.MAP.setView(L.latLng(e.geometry.coordinates[1],e.geometry.coordinates[0]),15,{animate:!0}),L.geoJSON(i,{style:this._STILE("debug")}).addTo(this.grpdebug);let a=this.$TURF_polygontoline(this.grpadminghost.toGeoJSON().features[0]);this.$TURF_booleanwithin(e,this.$TURFCOMBINE(this.grpbuffered.toGeoJSON()).features[0])||this.$_.each(this.grpcenterlines.toGeoJSON().features,t=>{let e=this.$TURF_center(t),a=this.$TURF_booleanwithin(e,s),r=this.$TURF_booleanwithin(e,i);a&&!r&&L.geoJSON(this.$TURFBUFFER(this.$TURFH.lineString(t.geometry.coordinates[0]),50,{units:"feet"}),{style:this._STILE("untraversed")}).addTo(this.grptrace)}),this.meta.within=this.$TURF_booleanwithin(e,this.grpadminghost.toGeoJSON().features[0]),this.meta.been=this.$_.some(this.tracks.buffered.features,t=>this.$TURF_booleanwithin(e,t)),this.meta.distanceToBorder=this.$TURF_pointtolinedistance(e,a.features[0],{units:"meters"}),this.meta.traceLength=this.$TURFLENGTH(this.grptrace.toGeoJSON()).toFixed(1)}}},_GETHISTORY:function(){this.loadings.app=!0,t.getJSON("static/ebl.geojson",t=>{this.loadings.app=!1,this.tracks.history=t})},_MAPHISTORY:function(){this.grphistorytracks.clearLayers(),this.tracks.history&&this.tracks.history.features.length>0&&(this.loadings.app=!0,this.$_.each(this.tracks.history.features,t=>{L.geoJSON(t,{style:this._STILE("incomingHistory",t.properties.time)}).bindPopup(t=>`<h5 class="is-size-5">${t.feature.properties.name}</h5>`).addTo(this.grphistorytracks)}),this.actives.bboxString||this.MAP.fitBounds(this.grphistorytracks.getBounds()),this.loadings.app=!1,this._BUFFERTRACKS())},_META:function(t){switch(t){case"history":if(this.border&&this.grphistorytracks.getLayers().length>0){let t=this.$_.flatten(this.$TURFCOMBINE(this.grphistorytracks.toGeoJSON()).features[0].geometry.coordinates,1),e=this.$TURFH.lineString(t),s=this.$TURF_linesplit(e,this.border.features[0]),i=0,a=0;this.$_.each(s.features,(t,e)=>{this.$TURF_booleanwithin(this.$TURF_center(t),this.grpadminghost.toGeoJSON().features[0])?i+=this.$TURFLENGTH(t,{units:"kilometers"}):a+=this.$TURFLENGTH(t,{units:"kilometers"})}),this.meta.historyLengthValid=i,this.meta.historyLengthInvalid=a}else console.log("border not ready")}},_BUFFERTRACKS:function(t){this.grpbuffered.clearLayers(),this.tracks.buffered=this.$TURFBUFFER(this.grphistorytracks.toGeoJSON(),10,{units:"meters"})},_MAPBUFFEREDTRACKS:function(t){L.geoJSON(this.tracks.buffered,{style:t=>this._STILE("buffer",t)}).addTo(this.grpbuffered),this.grphistorytracks.bringToFront(),this._LAUDIT("grpbuffered",!0)},_SETROUTE:function(){let t={ridekey:this.actives.rideKey?this.actives.rideKey:"$",basemap:this.actives.baseMap?this.actives.baseMap:"$",query:this.actives.queryString?this.actives.queryString:"$",bbox:this.actives.bboxString?this.actives.bboxString:"$"};this.$router.push({params:t})},_LAUDIT:function(t,e){let s=null;switch(t){case"grphistorytracks":e?(this.MAP.addLayer(this.grphistorytracks),this.$_.findWhere(this.layers,{handle:t}).on=!0):((s=this.$_.findWhere(this.layers,{handle:t}).on)?this.MAP.removeLayer(this.grphistorytracks):this.MAP.addLayer(this.grphistorytracks),this.$_.findWhere(this.layers,{handle:t}).on=!s);break;case"grpbuffered":e?(this.MAP.addLayer(this.grpbuffered),this.$_.findWhere(this.layers,{handle:t}).on=!0):((s=this.$_.findWhere(this.layers,{handle:t}).on)?this.MAP.removeLayer(this.grpbuffered):this.MAP.addLayer(this.grpbuffered),this.$_.findWhere(this.layers,{handle:t}).on=!s);break;case"grpcenterlines":e?(this.MAP.addLayer(this.grpcenterlines),this.$_.findWhere(this.layers,{handle:t}).on=!0):((s=this.$_.findWhere(this.layers,{handle:t}).on)?this.MAP.removeLayer(this.grpcenterlines):this.MAP.addLayer(this.grpcenterlines),this.$_.findWhere(this.layers,{handle:t}).on=!s);break;case"grpdebug":e?(this.MAP.addLayer(this.grpdebug),this.$_.findWhere(this.layers,{handle:t}).on=!0):((s=this.$_.findWhere(this.layers,{handle:t}).on)?this.MAP.removeLayer(this.grpdebug):this.MAP.addLayer(this.grpdebug),this.$_.findWhere(this.layers,{handle:t}).on=!s)}}},watch:{loadings:{deep:!0,handler:function(t,e){this.$_.contains(this.$_.values(this.loadings),!0)?this.$refs.topProgress.start():this.$refs.topProgress.done()}},"tracks.buffered":{handler:function(t,e){this._MAPBUFFEREDTRACKS()}},"tracks.history":{handler:function(t,e){this._MAPHISTORY()}},trace:{handler:function(t,e){this._MAPTRACE(),this._META("trace")}},"actives.baseMap":{handler:function(t,e){let s=this.$_.findWhere(this.baseMaps,{handle:this.actives.baseMap}).urii;s&&(this.grpbasemaps.clearLayers(),this.grpbasemaps.addLayer(new L.TileLayer(s)))}},"meta.within":{handler:function(t,e){e&&!t&&(this.konsole=[{timeout:6,klass:"has-text-danger",msg:"YOU JUST LEFT BROOKLINE :-<",sender:"meta.within.watcher"}]),t&&!e&&(this.konsole=[{timeout:6,klass:"has-text-info",msg:"back in brookline :-)",sender:"meta.within.watcher"}])}}}}}).call(e,s("7t+N"))},XBbL:function(t,e){},dj2B:function(t,e){const s=5,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",a=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],r=1,n=0,o="undefined"!=typeof BigInt?BigInt:Number;function l(t){let e=t;return e&o(1)&&(e=~e),+(e>>=o(1)).toString()}function h(t){let e="",s=o(t);for(;s>31;){const t=s&o(31)|o(32);e+=i[t],s>>=o(5)}return e+i[s]}function c(t){let e=o(t);const s=e<0;return e<<=o(1),s&&(e=~e),h(e)}t.exports={encode:function({precision:t=s,thirdDim:e=n,thirdDimPrecision:i=0,polyline:a}){const l=10**t,d=10**i,p=function(t,e,s){if(t<0||t>15)throw new Error("precision out of range. Should be between 0 and 15");if(s<0||s>15)throw new Error("thirdDimPrecision out of range. Should be between 0 and 15");if(e<0||e>7||4===e||5===e)throw new Error("thirdDim should be between 0, 1, 2, 3, 6 or 7");const i=s<<7|e<<4|t;return h(r)+h(i)}(t,e,i),u=[];let f=o(0),g=o(0),b=o(0);return a.forEach(t=>{const s=o(Math.round(t[0]*l));u.push(c(s-f)),f=s;const i=o(Math.round(t[1]*l));if(u.push(c(i-g)),g=i,e){const e=o(Math.round(t[2]*d));u.push(c(e-b)),b=e}}),[...p,...u].join("")},decode:function(t){const e=function(t){let e=o(0),s=o(0);const i=[];if(t.split("").forEach(t=>{const r=o(function(t){const e=t.charCodeAt(0);return a[e-45]}(t));e|=(r&o(31))<<s,(r&o(32))===o(0)?(i.push(e),e=o(0),s=o(0)):s+=o(5)}),s>0)throw new Error("Invalid encoding");return i}(t),s=function(t,e){if(+t.toString()!==r)throw new Error("Invalid format version");const s=+e.toString();return{precision:15&s,thirdDim:s>>4&7,thirdDimPrecision:s>>7&15}}(e[0],e[1]),i=10**s.precision,n=10**s.thirdDimPrecision,{thirdDim:h}=s;let c=0,d=0,p=0;const u=[];let f=2;for(;f<e.length;)c+=l(e[f])/i,d+=l(e[f+1])/i,h?(p+=l(e[f+2])/n,u.push([c,d,p]),f+=3):(u.push([c,d]),f+=2);if(f!==e.length)throw new Error("Invalid encoding. Premature ending reached");return{header:s,polyline:u}},ABSENT:n,LEVEL:1,ALTITUDE:2,ELEVATION:3}},qrve:function(t,e){},uslO:function(t,e,s){var i={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn-bd":"1C9R","./bn-bd.js":"1C9R","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-in":"yJfC","./en-in.js":"yJfC","./en-nz":"dyB6","./en-nz.js":"dyB6","./en-sg":"NYST","./en-sg.js":"NYST","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-mx":"USNP","./es-mx.js":"USNP","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fil":"rMbQ","./fil.js":"rMbQ","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./ga":"U5Iz","./ga.js":"U5Iz","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-deva":"VGQH","./gom-deva.js":"VGQH","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it-ch":"/E8D","./it-ch.js":"/E8D","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ku":"kI9l","./ku.js":"kI9l","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./oc-lnc":"KOFO","./oc-lnc.js":"KOFO","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tk":"+WRH","./tk.js":"+WRH","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-mo":"+WA1","./zh-mo.js":"+WA1","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function a(t){return s(r(t))}function r(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}a.keys=function(){return Object.keys(i)},a.resolve=r,t.exports=a,a.id="uslO"},wAIY:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.dc651346174a2525e3b8.js.map