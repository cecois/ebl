webpackJsonp([1],{"/U+F":function(e,t,s){"use strict";(function(e){t.a={name:"evERyBlINE",created:function(){window.addEventListener("keydown",this.keyMonitor)},beforeDestroy:function(){window.removeEventListener("keydown",this.keyMonitor)},mounted:function(){this.actives={rideKey:this.$route.params.ridekey&&"$"!=this.$route.params.ridekey?this.$route.params.ridekey:null,rideIso:this.$route.params.rideiso&&"$"!=this.$route.params.rideiso?this.$route.params.rideiso:null,streetIso:this.$route.params.streetiso&&"$"!=this.$route.params.streetiso?this.$route.params.streetiso:null,baseMap:this.$route.params.basemap&&"$"!=this.$route.params.basemap?this.$route.params.basemap:"carto_positron",queryString:this.$route.params.query&&"$"!=this.$route.params.query?this.$route.params.query:null,bboxString:this.$route.params.bbox&&"$"!=this.$route.params.bbox?this.$route.params.bbox:null,splayed:"S"==this.$route.params.splayed},this.loadings.app=!0,this.konsole=[{msg:new Date,klass:"is-info",timeout:20,timeout:20}],this.MAP=new L.Map("map",{editable:!0,zoomControl:!1,center:[42,-72],attributionControl:!1,zoom:11,preferCanvas:!1}).on("moveend",e=>{this.actives.bboxString=this.MAP.getBounds().toBBoxString()});this.MAP.createPane("pnBasemaps").style.zIndex=407,this.MAP.createPane("pnAdmin").style.zIndex=408,this.MAP.createPane("pnBuffered").style.zIndex=410,this.MAP.createPane("pnTracksValid").style.zIndex=412,this.MAP.createPane("pnTracksInvalid").style.zIndex=411,this.MAP.createPane("pnDebug").style.zIndex=409,this.MAP.createPane("pnCenterlines").style.zIndex=415,this.MAP.createPane("pnStreetIso").style.zIndex=416,this.MAP.createPane("pnIso").style.zIndex=417,this.MAP.createPane("pnRemain").style.zIndex=418,this.grpbasemaps||(this.grpbasemaps=(new L.featureGroup).addTo(this.MAP)),this.grpadminghost||(this.grpadminghost=(new L.featureGroup).addTo(this.MAP)),this.grphistorytracksValid||(this.grphistorytracksValid=(new L.featureGroup).addTo(this.MAP),this.layers.push({menued:!0,group:"grphistorytracksValid",handle:"grphistorytracksvalid",on:!0,abbrev:"trksvlid",klass:"icon-noun_buffer",fz:1})),this.grphistorytracksInvalid||(this.grphistorytracksInvalid=(new L.featureGroup).addTo(this.MAP),this.layers.push({menued:!1,group:"grphistorytracksInvalid",handle:"grphistorytracksinvalid",on:!0,abbrev:"grphistorytracksInvalid",klass:"icon-noun_buffer",fz:2})),this.grpcenterlines||(this.grpcenterlines=(new L.featureGroup).addTo(this.MAP)),this.grpadmin||(this.grpadmin=(new L.featureGroup).addTo(this.MAP));let t=this.$_.findWhere(this.baseMaps,{handle:this.actives.baseMap}).urii;if(this.grpbasemaps.addLayer(new L.TileLayer(t)),this.grpbuffered||(this.grpbuffered=(new L.featureGroup).addTo(this.MAP),this.layers.push({menued:!0,group:"grpbuffered",handle:"grpbuffered",on:!1,abbrev:"hstb",klass:"icon-noun_buffer",fz:0})),this.grpdebug||(this.grpdebug=(new L.featureGroup).addTo(this.MAP)),this.grpisotracks||(this.grpisotracks=(new L.featureGroup).addTo(this.MAP),this.layers.push({menued:!0,group:"grpisotracks",handle:"grpisotracks",on:!1,abbrev:"iso",klass:"icon-noun_binoculars",fz:3})),this.grpstreetiso||(this.grpstreetiso=(new L.featureGroup).addTo(this.MAP),this.layers.push({menued:!0,group:"grpstreetiso",handle:"grpstreetiso",on:!1,abbrev:"strt",klass:"fa fa-road",fz:4})),this.grpahead||(this.grpahead=(new L.featureGroup).addTo(this.MAP),this.layers.push({menued:!0,group:"grpahead",handle:"grpahead",on:!1,abbrev:"ahd",klass:"fa fa-binoculars",fz:4})),e.getJSON("static/ebl-buffered.geojson",e=>{L.geoJSON(e,{style:this._STILE("buffer")}).addTo(this.grpbuffered),this.loadings.app=!1}),e.getJSON("static/streets-hit-master.json",e=>{this.tracks.streetsLog=e}),axios.get("static/brookline-outline.geojson").then(e=>{this.border=e.data}).catch(e=>{this.konsole=[{msg:e,klass:"error",timeout:20,sender:"axios.catch.outline"}]}),axios.get("static/brookline.geojson").then(e=>{L.geoJSON(e.data,{style:this._STILE("ghost"),snapIgnore:!0}).addTo(this.grpadminghost)}).catch(e=>{this.konsole=[{msg:e,klass:"error",timeout:20,sender:"axios.catch.brookline"}]}),e.getJSON("static/brookline-osm-centerlines.geojson",e=>{L.geoJSON(e,{style:this._STILE("centerlines")}).addTo(this.grpcenterlines),this.meta.centerlinesLength=this.$TURFLENGTH(this.grpcenterlines.toGeoJSON()),this.actives.streetIso&&this._SETSTREETISO()}),axios.get("static/ebl-remaining.geojson").then(e=>{L.geoJSON(e.data,{style:this._STILE("remaining"),snapIgnore:!0}).addTo(this.grpahead).on("click",e=>{this.actives.streetIso=e.layer.feature.properties.name})}).catch(e=>{this.konsole=[{msg:e,klass:"error",timeout:20,sender:"axios.catch.remaining"}]}),this.loadings.app=!1,this.$nextTick(()=>{this._GETHISTORY()}),this.actives.bboxString){let e=this.actives.bboxString.split(","),t={west:e[0],south:e[1],east:e[2],north:e[3]};this.MAP.fitBounds([[t.south,t.west],[t.north,t.east]])}window.V=this,console.log(window.V)},computed:{cmpLayerOnns:function(){return this.$_.sortBy(this.$_.filter(this.layers,e=>e.on),"fz")},cmpLayerOffs:function(){return this.$_.filter(this.layers,e=>!e.on)},cmpStreetsPerIso:function(){return this.$_.map(this.meta.streetsPerIso,e=>({streetName:this.$_.first(this.$_.uniq(this.$_.pluck(e,"streetName"))),count:e.length}))},cmpIncludedTrackNames:function(){return this.actives.rideKey?this.$_.pluck(this.$_.filter(this.menus.tracks,e=>new Date(e.trackTime).valueOf()<=new Date(this._GETACTIVERIDEKEYOB().properties.time).valueOf()),"trackName"):this.$_.pluck(this.menus.tracks,"trackName")},cmpTrackHistory:function(){return[]}},data:()=>({MAP:null,meta:{within:!0,been:!0,centerlinesLength:0,historyLengthValid:0,historyLengthInvalid:0,traceLength:0,trackMeta:[],streetsPerIso:[]},menus:{tracks:[]},border:null,debug:{},streetIso:null,rideIso:null,liveFilter:{string:null},actives:{baseMap:null,rideKey:null,rideIso:null,streetIso:null,queryString:null,bboxString:null,splayed:null},baseMaps:[{name:"Esri Standard",handle:"esri_standard",urii:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",thmb:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/15/12124/9910",hue:"light"},{name:"Stamen Toner Lite",handle:"stamen_toner_lite",urii:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}@2x.png",thmb:"https://stamen-tiles-c.a.ssl.fastly.net/toner-lite/18/79279/96968@2x.png",hue:"light"},{name:"AllTrails Topo",handle:"alltrails_topo",urii:"https://us-topo.alltrails.com/{z}/{x}/{y}.png",thmb:"https://us-topo.alltrails.com/13/2459/3025.png",hue:"light"},{name:"Stamen Terrain",handle:"stamen_terrain",urii:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}@2x.png",thmb:"https://stamen-tiles-b.a.ssl.fastly.net/terrain/16/19819/24242@2x.png",hue:"light"},{name:"Google Hybrid",handle:"google_hybrid",urii:"https://mt3.google.com/vt/lyrs=y&x={x}&y={y}&z={z}",thmb:"https://mt3.google.com/vt/lyrs=y&x=79279&y=96968&z=18",hue:"dark"},{name:"USGS All-Topo",handle:"usgs_topo",urii:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer/tile/{z}/{y}/{x}",thmb:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer/tile/16/24242/19819",hue:"light"},{name:"USGS Relief",handle:"usgs_relief",urii:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSShadedReliefOnly/MapServer/tile/{z}/{y}/{x}",thmb:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSShadedReliefOnly/MapServer/tile/16/24242/19819",hue:"light"},{name:"OpenCycleMap",handle:"ocm",urii:"https://tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",thmb:"https://tile.thunderforest.com/cycle/18/79279/96968.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",hue:"dark"},{name:"Pioneer",handle:"ocm_pioneer",urii:"https://tile.thunderforest.com/pioneer/{z}/{x}/{y}.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",thmb:"https://tile.thunderforest.com/pioneer/18/79279/96968.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",hue:"light"},{name:"Mobile Atlas",handle:"ocm_mobile",urii:"https://tile.thunderforest.com/mobile-atlas/{z}/{x}/{y}.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",thmb:"https://tile.thunderforest.com/mobile-atlas/18/79279/96968.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",hue:"light"},{name:"Carto Positron",handle:"carto_positron",urii:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",thmb:"https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/18/79279/96968.png",hue:"light"},{name:"Carto Dark Matter",handle:"carto_darkmatter",urii:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png",thmb:"https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/18/79279/96968.png",hue:"light"},{name:"Spinal Map",handle:"ocm_spinal",urii:"https://tile.thunderforest.com/spinal-map/{z}/{x}/{y}.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",thmb:"https://tile.thunderforest.com/spinal-map/18/79279/96968.png?apikey=4e07c12ddb92435fbaf5d077958a5f43",hue:"dark"},{name:"Decimal (by Tristen Brown)",handle:"mapbox_decimal",urii:"https://api.mapbox.com/styles/v1/cecois/cj5mk8bee3i2w2qkg9al5viir/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoiY2Vjb2lzIiwiYSI6ImNqM3B3ZHJ3MzAwc2Qyd3BmNTdqeTlxcmcifQ.gZGEq-kc0KdSNWfh-3wumA",thmb:"https://api.mapbox.com/styles/v1/cecois/cj5mk8bee3i2w2qkg9al5viir/tiles/256/18/79279/96968@2x?access_token=pk.eyJ1IjoiY2Vjb2lzIiwiYSI6ImNqM3B3ZHJ3MzAwc2Qyd3BmNTdqeTlxcmcifQ.gZGEq-kc0KdSNWfh-3wumA",hue:"dark"},{name:"Frank (by Clare Trainor)",handle:"mapbox_frank",urii:"https://api.mapbox.com/styles/v1/cecois/ckjresd9b3gxp19l7cumbgdpi/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoiY2Vjb2lzIiwiYSI6ImNqM3B3ZHJ3MzAwc2Qyd3BmNTdqeTlxcmcifQ.gZGEq-kc0KdSNWfh-3wumA",thmb:"https://api.mapbox.com/styles/v1/cecois/ckjresd9b3gxp19l7cumbgdpi/tiles/256/18/79279/96968@2x?access_token=pk.eyJ1IjoiY2Vjb2lzIiwiYSI6ImNqM3B3ZHJ3MzAwc2Qyd3BmNTdqeTlxcmcifQ.gZGEq-kc0KdSNWfh-3wumA",hue:"dark"},{name:"Blueprint (MapBox)",handle:"mapbox_blueprint",urii:"https://api.mapbox.com/styles/v1/cecois/cknlwpq880kur17qzql0je8i5/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoiY2Vjb2lzIiwiYSI6ImNqM3B3ZHJ3MzAwc2Qyd3BmNTdqeTlxcmcifQ.gZGEq-kc0KdSNWfh-3wumA",thmb:"https://api.mapbox.com/styles/v1/cecois/cknlwpq880kur17qzql0je8i5/tiles/256/18/79279/96968@2x?access_token=pk.eyJ1IjoiY2Vjb2lzIiwiYSI6ImNqM3B3ZHJ3MzAwc2Qyd3BmNTdqeTlxcmcifQ.gZGEq-kc0KdSNWfh-3wumA",hue:"dark"},{name:"Standard Oil (MapBox)",handle:"mapbox_standardoil",urii:"https://api.mapbox.com/styles/v1/cecois/cknlwzllv0l2f17mz0li5o22i/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoiY2Vjb2lzIiwiYSI6ImNqM3B3ZHJ3MzAwc2Qyd3BmNTdqeTlxcmcifQ.gZGEq-kc0KdSNWfh-3wumA",thmb:"https://api.mapbox.com/styles/v1/cecois/cknlwzllv0l2f17mz0li5o22i/tiles/256/18/79279/96968@2x?access_token=pk.eyJ1IjoiY2Vjb2lzIiwiYSI6ImNqM3B3ZHJ3MzAwc2Qyd3BmNTdqeTlxcmcifQ.gZGEq-kc0KdSNWfh-3wumA",hue:"dark"}],layers:[],konsole:[],page:{title:"ebl.dshbrd",splayed:!1,paneledatall:!0},modals:{credits:!1},loadings:{app:!1},tracks:{history:[],buffered:null,streetsLog:null,streetsAhead:null},credits:["routing: openrouteservice.org | OpenStreetMap contributors","buffered tracks icon: outline by Jellycons from the Noun Project","tracks icon: route by Andrejs Kirma from the Noun Project","tracks review icon: Test Tube by Icon Island from the Noun Project","proposed route icon: Vector by logan from the Noun Project","isolated track icon: Binoculars by praveen patchu from the Noun Project","app icon: (altered from 'Bicycle' by) ibrandify, PK - https://thenounproject.com/search/?q=bicycle&i=2667656"],classes:{armygreen:"rgba(75, 83, 32, 1)",persimmon:"rgba(236, 88, 0, 1)",darksienna:"rgba(51, 15, 10, 1)",flax:"rgba(239, 221, 141, 1)",lemonyellowcrayola:"rgba(244, 253, 175, 1)",naplesyellow:"#F8E16C",eblwhite:"rgb(233, 233, 233)",celadonblue:"rgba(36, 123, 160, 1)",skybluecrayola:"rgba(120, 227, 253, 1)",barnred:"rgba(111, 26, 7, 1)"}}),methods:{_SETSTREETISO:function(){if(console.log("_SETstreetISO"),this.actives.streetIso){let e=this.$_.flatten(this.$_.filter(this.grpahead.toGeoJSON().features,e=>e.properties.name==this.actives.streetIso));this.streetIso={type:"FeatureCollection",name:`Isolated Undone Street ${this.actives.rideKey}`,crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:e}}else console.log("no streetiso, setting to null..."),this.streetIso=null},_SETRIDEISO:function(){if(console.log("_SETRIDEISO"),this.actives.rideIso){console.log(`in setride iso, pulling from ${this.tracks.history.features.length} features`);let e=this.$_.flatten(this.$_.filter(this.tracks.history.features,e=>e.properties.name==this.actives.rideKey));console.log("features",e),this.rideIso={type:"FeatureCollection",name:`Isolated Ride ${this.actives.rideKey}`,crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:e}}else console.log("no rideiso, setting to null..."),this.rideIso=null;this.grpisotracks.bringToFront()},_MAPRIDEISO:function(){console.log("_mapRIDEISO's this.rideIso",this.rideIso),this.grpisotracks.clearLayers(),this.rideIso&&(L.geoJSON(this.rideIso,{pane:"pnIso",style:this._STILE("iso")}).addTo(this.grpisotracks),this.grpisotracks.bringToFront(),this.MAP.fitBounds(this.grpisotracks.getBounds()),this.$_.findWhere(this.layers,{group:"grpisotracks"}).on=!0,this._META()),this.grpisotracks.bringToFront()},_MAPSTREETISO:function(){if(console.log("_mapSTREETISO"),this.grpstreetiso.clearLayers(),this.streetIso){let e=this.$_.last(this.streetIso.features).geometry.coordinates[0][1],t=this.$_.last(this.streetIso.features).geometry.coordinates[0][0],s=[e,t];L.circle(s,{color:"rgb(255, 212, 49)",fillColor:"rgb(255, 212, 49)",fillOpacity:.5,radius:20}).bindPopup((s,i)=>`<div class="is-size-7">\n            <p><a target="_blank" href="https://www.google.com/maps/?cbll=${e},${t}&layer=c">goo</a> <span class="has-text-grey-lighter">||</span> <a target="_blank" href="https://www.mapillary.com/app/?lat=${e}&lng=${t}&z=19">llary</p>\n            </div>`).addTo(this.grpstreetiso).openPopup();L.geoJSON(this.streetIso,{pane:"pnStreetIso",style:this._STILE("streetiso")}).addTo(this.grpstreetiso).bindPopup(e=>`<h5 class="is-size-5">${e.feature.properties.name} (${this.$TURFLENGTH(this.grpstreetiso.toGeoJSON()).toFixed(1)}km)</h5>`),this.$_.findWhere(this.layers,{group:"grpstreetiso"}).on=!0,this.actives.streetIso&&this.grpstreetiso.getBounds().isValid()&&this.MAP.fitBounds(this.grpstreetiso.getBounds())}},_STREETSAHEAD:function(){return this.grpahead?this.$_.uniq(this.$_.pluck(this.$_.pluck(this.grpahead.toGeoJSON().features,"properties"),"name")):[]},_GETACTIVERIDEKEYOB:function(){if(this.tracks.history)return this.$_.find(this.tracks.history.features,e=>e.properties.name==this.actives.rideKey)},_STILE:function(e,t){this.$MOMENT("2020-10-12T12:00:11Z").unix(),this.$MOMENT().unix();switch(e){case"brookline":return{weight:5,opacity:.7,color:"rgba(239, 221, 141, 1)",fill:!1,fillOpacity:.6};case"incomingDefault":return{color:"rgba(236, 88, 0, 1)",fill:!1};case"centerlines":return{color:"#4aa",fill:!1,width:1,opacity:0};case"streetiso":return{dashArray:"2 5 10",color:"#F72585",fill:!1,weight:12,opacity:.8};case"untraversed":return{color:"#0D7CD6",fillColor:"#0D7CD6",fill:!0,weight:2,opacity:.88};case"incomingReturn":return{color:"rgba(120, 227, 253, 1)",fill:!1,dashArray:"2 5 10",opacity:.9,width:5,weight:8};case"iso":return{color:"rgba(120, 227, 253, 1)",fill:!1,dashArray:"2 5 10",opacity:.9,width:4,weight:8};case"incomingProposed":return{color:"rgba(36, 123, 160, 1)",fill:!1,dashArray:"5 10 2",opacity:.9,width:5,weight:8};case"proposalBuffer":return{color:"rgba(36, 123, 160, 1)",fill:!0,opacity:.2};case"remaining":return{width:6,color:"rgba(236, 88, 0, 1)",fill:!1,fillOpacity:.3,opacity:1};case"buffer":return{color:"rgb(236, 88, 0)",fill:!0,fillOpacity:.3,opacity:.5};case"trackvalid":return{width:5,color:"rgba(36, 123, 160, 1)",fill:!1,opacity:.9};case"trackinvalid":return{width:5,color:"rgba(111, 26, 7, 1)",fill:!1,opacity:.1};case"incomingHistory":return{color:"rgb(51, 15, 10)",fill:!1,opacity:.1};case"incomingDefault":return{color:`rgb(${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)})`,fill:!1,opacity:.6};case"start":return{radius:8,fillColor:"rgba(75, 83, 32, 1)",color:"rgba(75, 83, 32, 1)",weight:1,opacity:1,fillOpacity:1};case"finish":return{radius:8,fillColor:"rgba(111, 26, 7, 1)",color:"rgba(111, 26, 7, 1)",weight:1,opacity:1,fillOpacity:1};case"debug":return{radius:18,fillColor:"rgb(44,44,44)",color:"rgb(11,11,11)",weight:5,opacity:1,fillOpacity:.5};case"ghost":return{radius:1,fillColor:"rgb(44,44,44)",color:"rgb(55,11,55)",weight:2,opacity:.3,fillOpacity:.1};case"via":return{radius:6,fillColor:"rgb(233,233,233)",color:"rgb(11,11,11)",weight:5,opacity:1,fillOpacity:1};case"online":return{width:6,color:"#93E600",weight:5,opacity:1,fill:!1};case"linz":return{color:`rgba(${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},1)`,fillColor:`rgba(${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},1)`,fill:!1};default:return{color:`rgba(${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.random()})`,fillColor:`rgba(${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.random()})`,fill:!0,fillOpacity:Math.random()}}},_GETFILTEREDTRACKS:function(){let e=this.$_.clone(this.tracks.history);return this._GETACTIVERIDEKEYOB()&&(e.features=this.$_.filter(e.features,e=>new Date(e.properties.time).valueOf()<=new Date(this._GETACTIVERIDEKEYOB().properties.time).valueOf())),e},_CHARTPIECOMPLETE:function(e){let t=null,s={"done (excluding disqualifieds)":this.meta.centerlinesLength-this.meta.remaining,remaining:this.meta.remaining};switch(e){case"data":t=s;break;case"colors":t=[this.classes.persimmon,"rgba(75, 83, 32, .5)"];break;default:t=s}return t},_BANNERCO:function(e){let t=null;switch(e){case"borderDistance":t=this.meta.within?"has-text-ebl-banner-info":"has-text-ebl-important";break;case"donePrior":case"doneToday":case"readings":t=this.meta.within?"has-text-ebl-banner-info":"has-text-ebl-notso-important";break;default:t="has-text-ebl-banner-info"}return t},_GETHISTORY:function(){this.loadings.app=!0,e.getJSON("static/ebl.geojson",e=>{this.loadings.app=!1,this.tracks.history=e})},_MAPHISTORY:function(){this.grphistorytracksValid.clearLayers(),this.grphistorytracksInvalid.clearLayers(),this._GETFILTEREDTRACKS()&&this._GETFILTEREDTRACKS().features&&this._GETFILTEREDTRACKS().features.length>0&&(this.loadings.app=!0,this.$_.each(this._GETFILTEREDTRACKS().features,e=>{"winn"==e.properties.winout?L.geoJSON(e,{style:this._STILE("trackvalid",e.properties.time)}).bindPopup(e=>`<h5 class="is-size-5">${e.feature.properties.name}</h5>`).addTo(this.grphistorytracksValid).on("click",e=>{this.actives.rideKey=e.layer.feature.properties.name}):L.geoJSON(e,{style:this._STILE("trackinvalid",e.properties.time)}).bindPopup(e=>`<h5 class="is-size-5">${e.feature.properties.name}</h5>`).addTo(this.grphistorytracksInvalid).on("click",e=>{this.actives.rideKey=e.layer.feature.properties.name})}),this.actives.bboxString||this.MAP.fitBounds(this.grphistorytracksValid.getBounds()),this.loadings.app=!1),this.$nextTick(()=>{this._META("history"),this._SETRIDEISO()})},keyMonitor:function(e){"`"==e.key&&(this.page.splayed=!this.page.splayed),e.altKey&&(this.page.splayed=!this.page.splayed)},_SETMENUS:function(){this.menus.tracks=this.$_.map(this.$_.groupBy(this.$_.map(this.tracks.history.features,e=>e.properties),"name"),e=>({trackName:this.$_.first(this.$_.pluck(e,"name")),trackTime:this.$_.first(this.$_.pluck(e,"time"))}))},_META:function(e){this.meta.historyLengthValid=this.$TURFLENGTH(this.grphistorytracksValid.toGeoJSON()),this.meta.historyLengthInvalid=this.$TURFLENGTH(this.grphistorytracksInvalid.toGeoJSON()),this.meta.isolength=this.$TURFLENGTH(this.grpisotracks.toGeoJSON(),{units:"kilometers"}),this.meta.remaining=this.$TURFLENGTH(this.grpahead.toGeoJSON(),{units:"kilometers"}),this.meta.streetsPerIso=this._GETACTIVERIDEKEYOB()?this.$_.sortBy(this.$_.groupBy(this.$_.filter(this.tracks.streetsLog,e=>e.rideKey==this._GETACTIVERIDEKEYOB().properties.name.replace(" #","_")),"streetName"),e=>-1*e.length):[]},_METAOG:function(e){switch(this.grpdebug.clearLayers(),e){case"history":if(this.border&&this.grphistorytracksValid.getLayers().length>0){let e=this.$_.flatten(this.$TURFCOMBINE(this.grphistorytracksValid.toGeoJSON()).features[0].geometry.coordinates,1),t=this.$TURFH.lineString(e);console.log("megaLine length",this.$TURFLENGTH(t));let s=this.$TURF_linesplit(t,this.border.features[0]);console.log("split length",this.$TURFLENGTH(s)),console.log("split:",s);let i=0,a=0;this.$_.each(s.features,(e,t)=>{console.log("fea",e);let s=this.$TURF_booleanwithin(this.$TURF_centroid(e),this.grpadminghost.toGeoJSON().features[0]);s?L.geoJSON(e,{style:this._STILE("linz"),onEachFeature:function(e,t){e.on("click",function(){e.setStyle({width:6,color:"#93E600",weight:5,opacity:1,fill:!1})})}}).addTo(this.grpdebug):L.geoJSON(e,{style:this._STILE("debug"),onEachFeature:function(e,t){e.on("click",function(){e.setStyle({width:6,color:"#93E600",weight:5,opacity:1,fill:!1})})}}).addTo(this.grpdebug),s?i+=this.$TURFLENGTH(e,{units:"kilometers"}):a+=this.$TURFLENGTH(e,{units:"kilometers"})}),console.log("pre.this.meta.historyLengthValid",this.meta.historyLengthValid),console.log("pre.this.meta.historyLengthInvalid",this.meta.historyLengthInvalid),this.meta.historyLengthValid=i,console.log("lengthValid",i),this.meta.historyLengthInvalid=a,console.log("lengthInvalid",a),console.log("post.this.meta.historyLengthValid",this.meta.historyLengthValid),console.log("post.this.meta.historyLengthInvalid",this.meta.historyLengthInvalid)}else console.log("border and/or history not ready")}},_BUFFERTRACKS:function(e){this.grpbuffered.clearLayers(),this.tracks.buffered=this.$TURFBUFFER(this.grphistorytracksValid.toGeoJSON(),10,{units:"meters"})},_MAPBUFFEREDTRACKS:function(e){L.geoJSON(this.tracks.buffered,{style:e=>this._STILE("buffer",e)}).addTo(this.grpbuffered),this.grphistorytracksValid,this.$_.findWhere(this.layers,{group:"grpbuffered"}).on=!0},_GROUPGET:function(e){switch(e){case"grphistorytracksValid":return this.grphistorytracksValid;case"grphistorytracksInvalid":return this.grphistorytracksInvalid;case"grpisotracks":return this.grpisotracks;case"grpbuffered":case"grpstreetiso":return this.grpbuffered;case"grpahead":return this.grpahead}},_SETROUTE:function(){let e={ridekey:this.actives.rideKey?this.actives.rideKey:"$",rideiso:this.actives.rideIso?"S":"$",streetiso:this.actives.streetIso?this.actives.streetIso:"$",basemap:this.actives.baseMap?this.actives.baseMap:"$",splayed:this.page.splayed?"S":"$",query:this.actives.queryString?this.actives.queryString:"$",bbox:this.actives.bboxString?this.actives.bboxString:"$"};this.$router.push({params:e})},_LAUDIT:function(){console.log("_LAUDIT"),this.$_.each(this.cmpLayerOffs,e=>{let t=this._GROUPGET(e.group);this.MAP.removeLayer(t)}),this.$_.each(this.cmpLayerOnns,e=>{let t=this._GROUPGET(e.group);this.MAP.addLayer(t),t.bringToFront()})},_LAUDITOG:function(e,t){let s=null;switch(e){case"grpisotracks":t?(this.MAP.addLayer(this.grpisotracks),this.$_.findWhere(this.layers,{handle:e}).on=!0):((s=this.$_.findWhere(this.layers,{handle:e}).on)?this.MAP.removeLayer(this.grpisotracks):this.MAP.addLayer(this.grpisotracks),this.$_.findWhere(this.layers,{handle:e}).on=!s);break;case"grphistorytracks":t?(this.MAP.addLayer(this.grphistorytracksValid),this.$_.findWhere(this.layers,{handle:e}).on=!0):((s=this.$_.findWhere(this.layers,{handle:e}).on)?this.MAP.removeLayer(this.grphistorytracksValid):this.MAP.addLayer(this.grphistorytracksValid),this.$_.findWhere(this.layers,{handle:e}).on=!s);break;case"grpbuffered":t?(this.MAP.addLayer(this.grpbuffered),this.$_.findWhere(this.layers,{handle:e}).on=!0):((s=this.$_.findWhere(this.layers,{handle:e}).on)?this.MAP.removeLayer(this.grpbuffered):this.MAP.addLayer(this.grpbuffered),this.$_.findWhere(this.layers,{handle:e}).on=!s);break;case"grpcenterlines":t?(this.MAP.addLayer(this.grpcenterlines),this.$_.findWhere(this.layers,{handle:e}).on=!0):((s=this.$_.findWhere(this.layers,{handle:e}).on)?this.MAP.removeLayer(this.grpcenterlines):this.MAP.addLayer(this.grpcenterlines),this.$_.findWhere(this.layers,{handle:e}).on=!s);break;case"grpdebug":t?(this.MAP.addLayer(this.grpdebug),this.$_.findWhere(this.layers,{handle:e}).on=!0):((s=this.$_.findWhere(this.layers,{handle:e}).on)?this.MAP.removeLayer(this.grpdebug):this.MAP.addLayer(this.grpdebug),this.$_.findWhere(this.layers,{handle:e}).on=!s)}}},watch:{loadings:{deep:!0,handler:function(e,t){this.$_.contains(this.$_.values(this.loadings),!0)?this.$refs.topProgress.start():this.$refs.topProgress.done()}},layers:{deep:!0,handler:function(e,t){this._LAUDIT()}},"tracks.buffered":{handler:function(e,t){}},"page.splayed":{handler:function(e,t){this._SETROUTE()}},"tracks.history":{handler:function(e,t){this._SETMENUS(),this._MAPHISTORY()}},"actives.baseMap":{handler:function(e,t){let s=this.$_.findWhere(this.baseMaps,{handle:this.actives.baseMap}).urii;s&&(this.grpbasemaps.clearLayers(),this.grpbasemaps.addLayer(new L.TileLayer(s))),this._SETROUTE()}},"actives.rideKey":{handler:function(e,t){this.tracks.history&&this._MAPHISTORY(),this.actives.rideIso=!!e,this._SETROUTE()}},"actives.streetIso":{handler:function(e,t){this._SETSTREETISO(),this._SETROUTE()}},rideIso:{handler:function(e,t){this._MAPRIDEISO()}},streetIso:{handler:function(e,t){e&&(this.page.splayed=!0),this._MAPSTREETISO()}}}}}).call(t,s("7t+N"))},"1/Mr":function(e,t){e.exports={mode:"1616",debug:!1,apiH:"localhost",apiP:"3030",storeU:"https://everybline-1aae.restdb.io/rest",storeK:"5f7b0b29ed97473d24a5cfc1",ORSKey:"5b3ce3597851110001cf62486c6cb6cfcfc74b1aa529cfe60f07fedf"}},CtuF:function(e,t){},JQbY:function(e,t){},Ldmt:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("FcSG"),a=(s.n(i),s("z8jB")),r=s.n(a),o=s("cK3Q"),n=(s.n(o),s("bMd6")),l=(s.n(n),s("m5mp"));s.n(l);function h(e){switch(e.type){case"Polygon":return r()(e)>1?e:null;case"MultiPolygon":var t=[];if(Object(l.flattenEach)(e,function(e){r()(e)>1&&t.push(e.geometry.coordinates)}),t.length)return{type:"MultiPolygon",coordinates:t}}}t.default=function(e,t){var s=Object(n.getGeom)(e),a=Object(n.getGeom)(t),r=e.properties||{};if(s=h(s),a=h(a),!s)return null;if(!a)return Object(o.feature)(s,r);var l=i.diff(s.coordinates,a.coordinates);return 0===l.length?null:1===l.length?Object(o.polygon)(l[0],r):Object(o.multiPolygon)(l,r)}},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=s("VU/8")({name:"app"},a,!1,function(e){s("qrve")},null,null).exports,o=s("1/Mr"),n=s.n(o),l=s("/ocq"),h=s("/U+F"),c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{},[s("vue-headful",{attrs:{title:e.page.title,description:"fxsxxxrrrre"}}),e._v(" "),s("vue-topprogress",{ref:"topProgress",attrs:{color:"rgba(236, 88, 0, 1)"}}),e._v(" "),s("div",{attrs:{id:"map"}}),e._v(" "),s("nav",{staticClass:"navbar",attrs:{role:"navigation","aria-label":"main navigation"}},[s("nav",{staticClass:"level is-mobile",attrs:{id:"ebl-brand"}},[s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{},[e._v(e._s(e.$_.map(e.page.title,function(e){return Math.floor(10*Math.random())%2==0?e.toUpperCase():e}).join(""))+"\n            ")])])]),e._v(" "),s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{staticClass:"heading ebl-dash-heading"},[s("a",{staticClass:"navbar-item is-pulled-left",on:{click:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"default",void 0,t.key,void 0))return null;e.page.splayed=!e.page.splayed}}},[s("i",{class:["fas",e.page.splayed?"fa-star-half-alt":"fa-star-half",e.page.splayed?"ebl-nav-off":"ebl-nav-on"]})]),e._v(" "),s("a",{staticClass:"navbar-item",on:{click:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"default",void 0,t.key,void 0))return null;e.page.paneledatall=!e.page.paneledatall}}},[s("i",{class:[e.page.paneledatall?"far fa-map":"fas fa-map",e.page.paneledatall?"ebl-nav-off":"ebl-nav-on"]})])])])])])]),e._v(" "),s("div",{staticClass:"columns p-0 m-0 is-relative",attrs:{id:"konsole-wrapper"}},[e.konsole.length>0?s("div",{staticClass:"column is-full is-size-7 p-2",attrs:{id:"konsole"}},e._l(e.konsole,function(t){return s("div",{class:["level-item","has-text-centered",t.klass,"faded"+t.timeout],attrs:{id:"konsole-copy"}},[s("div",[s("p",[e._v(e._s(t.msg))])])])}),0):e._e()]),e._v(" "),e.page.splayed?e._e():s("div",{staticClass:"container is-fullhd pt-6 pl-2 pr-2",attrs:{id:"ebl-dashboard-wrapper"}},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-marginless",attrs:{id:"ebl-isoRide-wrapper"}},[e.rideIso?s("div",{staticClass:"pl-6"},[e._v("\n            "+e._s(e.rideIso.name)+": "),e.meta.isolength?s("span",[e._v(e._s(e.meta.isolength.toFixed(1))+"km")]):e._e(),e._v(" on "),this._GETACTIVERIDEKEYOB()?s("span",[e._v(e._s(this.$MOMENT(this._GETACTIVERIDEKEYOB().properties.time).format("YYYY.MMM.DD")))]):e._e()]):e.rideIso?s("div",{staticClass:"pl-1 is-size-7"},[e._v("\n            "+e._s(e.rideIso.name.replace("Isolated Ride ",""))+"\n          ")]):e._e()])]),e._v(" "),s("div",{staticClass:"tile is-ancestor"},[s("div",{staticClass:"tile is-vertical is-8"},[s("div",{staticClass:"tile"},[s("div",{staticClass:"tile is-parent is-vertical"},[s("article",{staticClass:"tile is-child notification has-text-centered"},[s("p",{staticClass:"title"},[e._v("total km.")]),e._v(" "),s("p",{class:["is-size-1","title","ebl-dash-item"]},[e._v(e._s(e.meta.centerlinesLength.toFixed(1)))]),e._v(" "),s("p",{staticClass:"has-text-grey-lighter"},[e._v("OSM export 2020.Oct.14")])]),e._v(" "),s("article",{staticClass:"tile is-child notification has-text-centered"},[s("p",{staticClass:"title"},[e._v("km complete")]),e._v(" "),e._GETACTIVERIDEKEYOB()?s("p",{staticClass:"ebl-filter-warning"},[e._v("as of "+e._s(e.$MOMENT(e._GETACTIVERIDEKEYOB().properties.time).format("YY.MMM.DD")))]):e._e(),e._v(" "),s("p",{class:["title","ebl-dash-item"]},[e._v(e._s((e.meta.centerlinesLength-e.meta.remaining).toFixed(1)))]),e._v(" "),s("p",{staticClass:"has-text-grey-lighter"},[e._v("within town border")])])]),e._v(" "),s("div",{staticClass:"tile is-parent pt-3"},[s("article",{staticClass:"tile is-child notification has-text-centered pt-6"},[s("p",{staticClass:"title mt-3"},[e._v("% completed")]),e._v(" "),s("pie-chart",{attrs:{height:"200px",legend:!1,donut:!0,data:e._CHARTPIECOMPLETE("data"),colors:e._CHARTPIECOMPLETE("colors")}}),e._v(" "),s("p",{class:["mt-2","title","ebl-dash-item"]},[e._v(e._s(((e.meta.centerlinesLength-e.meta.remaining)/e.meta.centerlinesLength*100).toFixed(1)))]),e._v(" "),e._GETACTIVERIDEKEYOB()?s("p",{staticClass:"ebl-filter-warning"},[e._v("as of "+e._s(e.$MOMENT(e._GETACTIVERIDEKEYOB().properties.time).format("YY.MMM.DD")))]):e._e()],1)])]),e._v(" "),s("div",{staticClass:"tile is-parent"},[s("article",{staticClass:"tile is-child has-text-centered notification"},[s("p",{staticClass:"title"},[e._v("streets ahead")]),e._v(" "),s("p",{staticClass:"has-text-grey-light is-size-7"},e._l(this._STREETSAHEAD(),function(t){return s("a",{class:[e.actives.streetIso==t?"street-on":"street"],on:{click:function(s){s.preventDefault(),e.actives.streetIso=t==e.actives.streetIso?null:t}}},[e._v(e._s(t)+", ")])}),0)])])]),e._v(" "),s("div",{staticClass:"tile is-parent"},[s("article",{staticClass:"tile is-child notification has-text-centered"},[s("div",{staticClass:"content"},[s("p",{staticClass:"title"},[e._v("tracks ("+e._s(e.menus.tracks.length)+")")]),e._v(" "),s("div",{staticClass:"content"},[s("nav",{staticClass:"xpanel",attrs:{id:"trackHistoryPanel"}},e._l(e.menus.tracks,function(t){return s("a",{class:[e.$_.contains(e.cmpIncludedTrackNames,t.trackName)?"included":"","panel-block","is-ac","waye"],on:{click:function(s){s.preventDefault(),e.actives.rideKey==t.trackName?e.actives.rideKey=null:e.actives.rideKey=t.trackName}}},[s("span",{staticClass:"panel-icon"},[s("i",{class:["ebl-bt-trackmenu",e.actives.rideKey==t.trackName?"fas fa-circle ebl-bt-trackmenu-on":"far fa-circle"],attrs:{"aria-hidden":"true"}})]),s("span",{class:[e.actives.rideKey==t.trackName?"ebl-bt-trackmenu-on":""]},[e._v(e._s(t.trackName))]),e._v(" "),s("span",{staticClass:"is-size-7 has-text-grey-lighter"},[e._v("Â ("+e._s(e.$MOMENT(t.trackTime).format("YY.MMM.DD"))+")")])])}),0)])])])])]),e._v(" "),s("div",{staticClass:"tile is-ancestor"},[s("div",{staticClass:"tile is-parent is-vertical"},[e._GETACTIVERIDEKEYOB()?s("article",{staticClass:"tile is-child has-text-centered"},[s("p",{staticClass:"title"},[e._v("streets touched")]),e._v(" "),s("p",{staticClass:"ebl-filter-warning"},[e._v("*on* "+e._s(e.$MOMENT(e._GETACTIVERIDEKEYOB().properties.time).format("YY.MMM.DD")))]),e._v(" "),e.cmpStreetsPerIso.length>0?s("p",{staticClass:"is-size-7"},e._l(e.cmpStreetsPerIso,function(t){return s("a",{class:[e.actives.streetIso==t.streetName?"street-on":"street"],on:{click:function(s){s.preventDefault(),e.actives.streetIso=e.actives.streetIso==t.streetName?null:t.streetName}}},[e._v(e._s(t.streetName)+" ("+e._s(t.count)+"), ")])}),0):s("p",{staticClass:"is-size-7"},[s("span",[e._v("calculated per isolated track, empty otherwise")])])]):e._e()])])]),e._v(" "),e.page.paneledatall?s("div",[e.page.splayed?s("div",{staticClass:"container is-fullhd pt-6",attrs:{id:"ebl-dashboard-wrapper-splayed"}},[s("nav",{staticClass:"level"},[s("div",{staticClass:"level-item has-text-centered"},[s("div",{staticClass:"has-text-centered"},[s("p",{staticClass:"has-text-centered",attrs:{id:""}}),s("p",{},[e._v("%")]),e._v(" "),s("p",{staticClass:"title"},[s("pie-chart",{attrs:{position:"relative",height:"50px",width:"33%",legend:!1,donut:!0,data:e._CHARTPIECOMPLETE("data"),colors:e._CHARTPIECOMPLETE("colors")}})],1),e._v(" "),s("p")])]),e._v(" "),s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{staticClass:"heading"},[e._v("km cmplt")]),e._v(" "),s("p",{staticClass:"title"},[e._v(e._s((e.meta.centerlinesLength-e.meta.remaining).toFixed(1)))])])]),e._v(" "),e._GETACTIVERIDEKEYOB()?s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{staticClass:"heading"},[e._v("Isltd Rid")]),e._v(" "),s("p",{staticClass:"title"},[e._v(e._s(e._GETACTIVERIDEKEYOB().properties.name)+"\n                ")]),s("div",{staticClass:"has-text-grey-light is-size-7"},[e._v("\n                  "+e._s(e.$MOMENT(e._GETACTIVERIDEKEYOB().properties.time).format("YY.MMM.DD")))]),e._v(" "),s("p")])]):e._e(),e._v(" "),e._GETACTIVERIDEKEYOB()?s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{staticClass:"heading"},[e._v("IsltdRid.len")]),e._v(" "),s("p",{staticClass:"title"},[e._v(e._s(e.meta.isolength.toFixed(1)))])])]):e._e()]),e._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column has-text-centered is-size-6"},[e._GETACTIVERIDEKEYOB()?s("p",{staticClass:"ebl-filter-warning"},[e._v("#s as of "+e._s(e.$MOMENT(e._GETACTIVERIDEKEYOB().properties.time).format("YY.MMM.DD")))]):e._e()])])]):e._e()]):e._e(),e._v(" "),s("footer",{staticClass:"footer pt-1 pb-1 has-text-centered"},[s("div",{staticClass:"level is-mobile pl-2 pr-2 is-family-monospace",attrs:{id:"ebl-layers"}},[s("div",{staticClass:"level-left"},[s("div",{staticClass:"level-item"},e._l(e.$_.filter(e.layers,function(e){return e.menued}),function(t){return s("a",{class:["pr-5",t.on?"ebl-nav-on":"ebl-nav","strt"!=t.abbrev||e.streetIso?"":"is-disabled","iso"!=t.abbrev||e.rideIso?"":"is-disabled"],on:{click:function(s){if(!s.type.indexOf("key")&&e._k(s.keyCode,"default",void 0,s.key,void 0))return null;e.$_.findWhere(e.layers,{group:t.group}).on=!e.$_.findWhere(e.layers,{group:t.group}).on}}},[s("i",{class:[""+t.klass]}),s("span",{class:["icon-noun_binoculars"==t.klass?"ml-3":"ml-1",t.on?"ebl-nav-on":""]},[e._v(e._s(t.abbrev))])])}),0)]),e._v(" "),s("div",{staticClass:"level-right pb-2"},e._l(e.baseMaps,function(t){return s("figure",{staticClass:"image is-24x24 mr-2 has-tooltip-arrow",attrs:{"data-tooltip":t.name}},[s("img",{class:["bt_baseMap","is-rounded",t.handle==e.actives.baseMap?"active":""],attrs:{src:t.thmb},on:{click:function(s){e.actives.baseMap=t.handle}}})])}),0)])])],1)},staticRenderFns:[]};var d=function(e){s("JQbY")},p=s("VU/8")(h.a,c,!1,d,null,null).exports,u=s("NsQv"),g={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{},[s("vue-headful",{attrs:{title:e.page.title,description:"fxsxxxrrrre"}}),e._v(" "),s("vue-topprogress",{ref:"topProgress",attrs:{color:"rgba(236, 88, 0, 1)"}}),e._v(" "),s("div",{attrs:{id:"map"}}),e._v(" "),s("nav",{class:["navbar",e._BANNERBG],attrs:{role:"navigation","aria-label":"main navigation"}},[s("nav",{staticClass:"level is-mobile"},[s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{staticClass:"heading ebl-dash-heading"},[s("a",{staticClass:"navbar-item is-size-1",on:{click:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"default",void 0,t.key,void 0))return null;e.zpause=!e.zpause}}},[s("i",{class:[e.zpause?"fas fa-pause-circle ebl-nav-on":"far fa-pause-circle"]})])])])]),e._v(" "),s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{staticClass:"heading ebl-dash-heading"},[e._v("Ttl.km")]),e._v(" "),s("p",{class:["title","ebl-dash-item",e._BANNERCO("totalCenterlines")]},[e._v(e._s(Math.round(e.meta.centerlinesLength)))])])]),e._v(" "),s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{staticClass:"heading ebl-dash-heading"},[e._v("dntdy.km")]),e._v(" "),s("p",{class:["title","ebl-dash-item",e._BANNERCO("doneToday")]},[e._v(e._s(e.meta.traceLength))])])]),e._v(" "),s("div",{staticClass:"level-item has-text-centered"},[s("div",[s("p",{staticClass:"heading ebl-dash-heading"},[e._v("#rDNgS.")]),e._v(" "),s("p",{class:["title","ebl-dash-item",e._BANNERCO("readings")]},[e._v(e._s(e.trace.length))])])])])]),e._v(" "),s("div",{staticClass:"columns p-0 m-0 is-relative",attrs:{id:"konsole-wrapper"}},[e.konsole.length>0?s("div",{staticClass:"column is-full is-size-7 p-2",attrs:{id:"konsole"}},e._l(e.konsole,function(t){return s("div",{class:["level-item","has-text-centered",t.klass,"faded"+t.timeout],attrs:{id:"konsole-copy"}},[s("div",[s("p",[e._v(e._s(t.msg))])])])}),0):e._e()]),e._v(" "),s("nav",{staticClass:"navbar",attrs:{role:"navigation","aria-label":"main navigation"}},[s("p",{staticClass:"currentStreet"}),this.currentStreet?s("div",{staticClass:"level-item has-text-centered"},[s("div",{attrs:{id:"streetPlateParent"}},[s("div",{attrs:{id:"streetPlateContentWrapper"}},[s("div",{attrs:{id:"number"}},[e._v("\n                "+e._s(e._CMPCURRENTSTREETSTRING)+"\n              ")])])])]):e._e(),e._v(" "),s("p")])],1)},staticRenderFns:[]};var f=function(e){s("CtuF")},m=s("VU/8")(u.a,g,!1,f,null,null).exports;i.a.use(l.a);var y=new l.a({routes:[{path:"/trace",name:"EBLTracer",component:m},{path:"/:ridekey?/:rideiso?/:streetiso?/:query?/:basemap?/:splayed?/:bbox?",name:"EBL",component:p}]}),b=s("PJh5"),v=s.n(b),_=s("rNNc"),T=s("WiKS"),k=s.n(T),E=s("oOQZ"),M=s.n(E),I=s("YeRc"),$=s("ikxi"),S=s.n($);i.a.use(I.a.use(S.a));const P=s("oCme"),O=s("9NYu"),j=s("dj2B"),w=s("y009").default,C=s("1UiH").default,L=s("7QBd").default,R=s("m5mp"),x=s("M07l").default,A=s("6CST").default,N=s("bEHx").default,F=s("iwmX").default,z=s("Uk1y").default,G=s("Ldmt").default,U=s("2rhJ").default,B=s("KBgd").default,D=s("Ebq+").default,V=s("oEQs").default,K=s("EcKR").default,J=s("bz5O").default,q=s("a4kP").default,H=s("a4kP").default,Y=s("5GQ8").default,W=s("cx8s").default,Q=s("HjdK").default,Z=s("WIsE").default,X=s("tq8K").default,ee=s("k/sV").default,te=s("EGTr").default,se=s("7tTk").default,ie=s("SUmV").default,ae=s("+TA3").default,re=s("cK3Q"),oe=s("m5mp"),ne=s("7sEF");i.a.component("vue-headful",k.a),i.a.use(_.a),i.a.use(M.a,{color:"rgba(236, 88, 0, 1)"}),i.a.config.productionTip=!1,Object.defineProperty(i.a.prototype,"$PENC",{value:O}),Object.defineProperty(i.a.prototype,"$MBFLEXPOLY",{value:P}),Object.defineProperty(i.a.prototype,"$HEREFLEX",{value:j}),Object.defineProperty(i.a.prototype,"$MOMENT",{value:v.a}),Object.defineProperty(i.a.prototype,"$TURF_flip",{value:H}),Object.defineProperty(i.a.prototype,"$TURF_centroid",{value:Q}),Object.defineProperty(i.a.prototype,"$TURF_center",{value:W}),Object.defineProperty(i.a.prototype,"$TURF_pointtolinedistance",{value:ie}),Object.defineProperty(i.a.prototype,"$TURF_nearestpoint",{value:z}),Object.defineProperty(i.a.prototype,"$TURF_bearing",{value:ae}),Object.defineProperty(i.a.prototype,"$TURF_lineintersect",{value:Z}),Object.defineProperty(i.a.prototype,"$TURF_linesplit",{value:ee}),Object.defineProperty(i.a.prototype,"$TURF_distance",{value:F}),Object.defineProperty(i.a.prototype,"$TURF_nearestpointonline",{value:se}),Object.defineProperty(i.a.prototype,"$TURF_booleanwithin",{value:J}),Object.defineProperty(i.a.prototype,"$TURF_booleanpointinpolygon",{value:K}),Object.defineProperty(i.a.prototype,"$TURF_bbox",{value:Y}),Object.defineProperty(i.a.prototype,"$TURF_bboxclip",{value:X}),Object.defineProperty(i.a.prototype,"$TURFSIMPLE",{value:w}),Object.defineProperty(i.a.prototype,"$TURFEXPLODE",{value:D}),Object.defineProperty(i.a.prototype,"$TURF_polygontoline",{value:te}),Object.defineProperty(i.a.prototype,"$TURFCOMBINE",{value:N}),Object.defineProperty(i.a.prototype,"$TURFCLEAN",{value:C}),Object.defineProperty(i.a.prototype,"$TURFUNION",{value:q}),Object.defineProperty(i.a.prototype,"$TURFLENGTH",{value:L}),Object.defineProperty(i.a.prototype,"$TURFMETA",{value:R}),Object.defineProperty(i.a.prototype,"$TURFINTERSECT",{value:U}),Object.defineProperty(i.a.prototype,"$TURFBUFFER",{value:x}),Object.defineProperty(i.a.prototype,"$TURFH",{value:re}),Object.defineProperty(i.a.prototype,"$TURFM",{value:oe}),Object.defineProperty(i.a.prototype,"$TURFPTGRID",{value:A}),Object.defineProperty(i.a.prototype,"$TURFDIFF",{value:G}),Object.defineProperty(i.a.prototype,"$TURFENVELOPE",{value:B}),Object.defineProperty(i.a.prototype,"$TURFSAMPLE",{value:V}),Object.defineProperty(i.a.prototype,"$TOGEOJSON",{value:ne}),Object.defineProperty(i.a.prototype,"$CONFIG",{value:n.a}),new i.a({el:"#app",router:y,template:"<App/>",components:{App:r}})},NsQv:function(e,t,s){"use strict";(function(e,i){s("0gL7"),t.a={name:"evERyBlINE",created:function(){this.actives={baseMap:this.$route.params.basemap&&"$"!=this.$route.params.basemap?this.$route.params.basemap:"carto_positron"}},mounted:function(){this.konsole=[{msg:new Date,klass:"is-info",timeout:20,timeout:20}],this.MAP=new L.Map("map",{editable:!0,zoomControl:!1,center:[42,-72],attributionControl:!1,zoom:11});this.MAP.createPane("pnBasemaps").style.zIndex=407,this.MAP.createPane("pnAdmin").style.zIndex=408,this.MAP.createPane("pnBuffered").style.zIndex=410,this.MAP.createPane("pnTracks").style.zIndex=412,this.MAP.createPane("pnDebug").style.zIndex=419,this.MAP.createPane("pnCenterlines").style.zIndex=411,this.MAP.createPane("pnCenterlines").style.zIndex=412,this.MAP.createPane("pnTrace").style.zIndex=417,this.grpbasemaps||(this.grpbasemaps=new L.featureGroup({pane:"pnBasemaps"}).addTo(this.MAP)),this.grpvertices||(this.grpvertices=new L.featureGroup({pane:"pnVertices"}).addTo(this.MAP)),this.grpbrooklinepoly||(this.grpbrooklinepoly=new L.featureGroup({pane:"pnAdmin"}).addTo(this.MAP)),this.grptrace||(this.grptrace=new L.featureGroup({pane:"pnTrace"}).addTo(this.MAP)),this.grphistory||(this.grphistory=new L.featureGroup({pane:"pnTracks"}).addTo(this.MAP)),this.grpcenterlines||(this.grpcenterlines=new L.featureGroup({pane:"pnCenterlines"}).addTo(this.MAP)),this.grpadmin||(this.grpadmin=new L.featureGroup({pane:"pnAdmin"}).addTo(this.MAP));let t=this.$_.findWhere(this.baseMaps,{handle:this.actives.baseMap}).urii;this.grpbasemaps.addLayer(new L.TileLayer(t)),this.grpbuffered||(this.grpbuffered=new L.featureGroup({pane:"pnBuffered"}).addTo(this.MAP),this.layers.push({handle:"grpbuffered",on:!1,abbrev:"hstb",klass:"icon-noun_buffer"})),this.grpdebug||(this.grpdebug=new L.layerGroup({pane:"pnDebug"}).addTo(this.MAP)),axios.get("static/brookline-outline.geojson").then(e=>{this.border=e.data}).catch(e=>{this.konsole=[{msg:e,klass:"error",timeout:20,sender:"axios.catch.outline"}]}),axios.get("static/brookline.geojson").then(e=>{L.geoJSON(e.data,{style:this._STILE("ghost"),snapIgnore:!0}).addTo(this.grpbrooklinepoly)}).catch(e=>{this.konsole=[{msg:e,klass:"error",timeout:20,sender:"axios.catch.brookline"}]}),e.getJSON("static/brookline-osm-centerlines.geojson",e=>{L.geoJSON(e,{style:this._STILE("centerlines")}).addTo(this.grpcenterlines),this.meta.centerlinesLength=this.$TURFLENGTH(this.grpcenterlines.toGeoJSON())}),e.getJSON("static/brookline-osm-centerlines-vertices.geojson",e=>{L.geoJSON(e,{pointToLayer:function(e,t){return L.circleMarker(t,{radius:8,fillColor:"#ff7800",color:"#000",weight:1,opacity:0,fillOpacity:0})}}).addTo(this.grpvertices)}),this.loadings.app=!1,window.V=this,console.log(window.V),this.$nextTick(()=>{this._GETHISTORY()})},computed:{_CMPCURRENTSTREETSTRING:function(){const e=[{og:"Aisle",re:"Asl"},{og:"Avenue",re:"Av"},{og:"Parking",re:"Pkng"},{og:"Beechwood",re:"Bchwd"},{og:"Bikepath",re:"Pth"},{og:"Branch",re:"Brnch"},{og:"Circle",re:"Cir"},{og:"Connector",re:"Cnctr"},{og:"Court",re:"Ct"},{og:"Crescent",re:"Cres"},{og:"Crossway",re:"Cxwy"},{og:"Drive",re:"Dr"},{og:"Driveway",re:"Way"},{og:"Extension",re:"Ext"},{og:"Lane",re:"Ln"},{og:"Parkway",re:"Pkwy"},{og:"Path",re:"Pth"},{og:"Place",re:"Pl"},{og:"Road",re:"Rd"},{og:"Rotary",re:"Rtry"},{og:"Square",re:"Sq"},{og:"Street",re:"St"},{og:"Terrace",re:"Ter"},{og:"Trail",re:"Trl"},{og:"Turnpike",re:"Pike"},{og:"Vale",re:"Vl"},{og:"Way",re:"Way"}];if(this.currentStreet){let t=this.currentStreet.split(" ");return i.map(t,t=>i.findWhere(e,{og:t})?i.findWhere(e,{og:t}).re:t).join(" ")}return null},_BANNERBG:function(){let e=null;switch(!0){case!this.meta.within:e="ebl-bg-without";break;case this.meta.distanceToBorder<=100:e="ebl-bg-nearing";break;default:e="ebl-bg-within"}return e}},data:()=>({MAP:null,zpause:!1,currentStreet:null,border:null,debug:{},actives:{baseMap:null},baseMaps:[{name:"Carto Positron",handle:"carto_positron",urii:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",thmb:"https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/18/79279/96968.png",hue:"light"}],traceFake:[{lng:-71.1276028845577,lat:42.348776160060915,order:0},{lng:-71.12790036129813,lat:42.348157821774485,order:1},{lng:-71.12816065344602,lat:42.34767688779104,order:2},{lng:-71.12888575300082,lat:42.34752573635061,order:3},{lng:-71.12946211418542,lat:42.34846012125222,order:4},{lng:-71.13005706766629,lat:42.34927082631071,order:5},{lng:-71.13085653640621,lat:42.35016396384663,order:6},{lng:-71.12987114470351,lat:42.35038381113987,order:7},{lng:-71.12756569996516,lat:42.350315108943335,order:8},{lng:-71.12539040130072,lat:42.351221971891185,order:9},{lng:-71.1245909325608,lat:42.350988387231396,order:10},{lng:-71.12587380100392,lat:42.35005403991167,order:11},{lng:-71.12713807715078,lat:42.34955937982539,order:12},{lng:-71.12795613818697,lat:42.348776160060915,order:13}],trace:[],layers:[],meta:{within:!0,been:!0,distanceToBorder:999,centerlinesLength:0,historyLengthTotal:0,historyLengthValid:0,historyLengthInvalid:0,traceLength:0},konsole:[],page:{title:"eBl:tracer"},modals:{credits:!1},loadings:{app:!1},tracks:{history:[],buffered:null}}),methods:{_STILE:function(e,t){this.$MOMENT("2020-10-12T12:00:11Z").unix(),this.$MOMENT().unix();switch(e){case"brookline":return{weight:5,opacity:.7,color:"rgba(239, 221, 141, 1)",fill:!1,fillOpacity:.6};case"incomingDefault":return{color:"rgba(236, 88, 0, 1)",fill:!1};case"centerlines":return{color:"#4aa",fill:!1,width:1,opacity:0};case"trace":return{dashArray:"2 5 10",color:"#87D100",fill:!1,weight:12,opacity:.8};case"untraversed":return{color:"#0D7CD6",fillColor:"#0D7CD6",fill:!0,weight:2,opacity:.95};case"incomingReturn":return{color:"rgba(120, 227, 253, 1)",fill:!1,dashArray:"2 5 10",opacity:.9,width:5,weight:8};case"iso":return{color:"rgba(120, 227, 253, 1)",fill:!1,dashArray:"2 5 10",opacity:.6,width:5,weight:8};case"incomingProposed":return{color:"rgba(36, 123, 160, 1)",fill:!1,dashArray:"5 10 2",opacity:.9,width:5,weight:8};case"proposalBuffer":return{color:"rgba(36, 123, 160, 1)",fill:!0,opacity:.2};case"buffer":return{color:"rgb(236, 88, 0)",fill:!0,fillOpacity:.3,opacity:.5};case"trackvalid":return{color:"rgba(36, 123, 160, 1)",fill:!1,opacity:1};case"trackinvalid":return{color:"rgba(136, 23, 60, 1)",fill:!1,opacity:1};case"history":return{color:"rgb(51, 15, 10)",fill:!1,opacity:.1};case"incomingDefault":return{color:`rgb(${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)})`,fill:!1,opacity:.6};case"start":return{radius:8,fillColor:"rgba(75, 83, 32, 1)",color:"rgba(75, 83, 32, 1)",weight:1,opacity:1,fillOpacity:1};case"finish":return{radius:8,fillColor:"rgba(111, 26, 7, 1)",color:"rgba(111, 26, 7, 1)",weight:1,opacity:1,fillOpacity:1};case"debug":return{radius:18,fillColor:"rgb(44,44,44)",color:"rgb(11,11,11)",weight:5,opacity:1,fillOpacity:.5};case"ghost":return{radius:1,fillColor:"rgb(44,44,44)",color:"rgb(55,11,55)",weight:2,opacity:.3,fillOpacity:.1};case"via":return{radius:6,fillColor:"rgb(233,233,233)",color:"rgb(11,11,11)",weight:5,opacity:1,fillOpacity:1};default:return{color:`rgba(${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.random()})`,fillColor:`rgba(${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.floor(254*Math.random()+1)},${Math.random()})`,fill:!0,fillOpacity:Math.random()}}},_FAKETRACE:function(){var e=0;setInterval(()=>{let t=this.traceFake[e];e++,this.trace.push(t||null)},5e3)},_BANNERCO:function(e){let t=null;switch(e){case"borderDistance":t=this.meta.within?"has-text-ebl-banner-info":"has-text-ebl-important";break;case"donePrior":case"doneToday":case"readings":t=this.meta.within?"has-text-ebl-banner-info":"has-text-ebl-notso-important";break;default:t="has-text-ebl-banner-info"}return t},_TRACE:function(){navigator.geolocation.watchPosition(e=>{this.trace.push({lat:e.coords.latitude,lng:e.coords.longitude})},e=>{this.konsole=[{timeout:20,klass:"has-text-error",msg:`nav.geo failed: ${e.message} (${e.code})`,sender:"if.geolocation.error"}]}),this._META("history")},_MAPTRACE:function(){if(this.trace.length>0){this.grptrace.clearLayers();let t=1==this.trace.length?this.$_.last(this.$_.compact(this.trace)):this.$_.last(this.$_.compact(this.trace),2)[1],s=this.$TURFH.point([t.lng,t.lat]),i=this.$TURF_nearestpoint(s,this.grpvertices.toGeoJSON());this.currentStreet=i.properties.name;let a=this.$TURFBUFFER(s,100,{units:"meters"});if(this.trace.length>1){let i=this.$_.last(this.$_.compact(this.trace),2)[0],r=this.$TURFH.point([i.lng,i.lat]),o=this.$TURF_bearing(s,r),n=this.$TURFH.lineString(this.$_.map(this.$_.compact(this.trace),e=>[e.lng,e.lat])),l=this.$TURFBUFFER(n,10,{units:"meters"});L.geoJSON(n,{style:this._STILE("trace")}).addTo(this.grptrace),this.zpause||this.MAP.setView(L.latLng(s.geometry.coordinates[1],s.geometry.coordinates[0]),17,{animate:!0});var e=[o];L.viewpoint([t.lat,t.lng],{id:1,radius:8,fillColor:"#87D100",color:"white",fillOpacity:1,directions:e,arrow:{width:10,height:10,offset:0,stroke:!0,color:"white",weight:3,opacity:1,fill:!0,fillColor:"#87D100",fillOpacity:1}}).addTo(this.grptrace).bringToFront();this.$TURF_booleanwithin(s,this.grpbuffered.toGeoJSON().features[0])||this.$_.each(this.grpcenterlines.toGeoJSON().features,e=>{let t=this.$TURF_center(e),s=this.$TURF_booleanwithin(t,a),i=this.$TURF_booleanwithin(t,l);s&&!i&&L.geoJSON(this.$TURFBUFFER(this.$TURFH.lineString(e.geometry.coordinates[0]),50,{units:"feet"}),{style:this._STILE("untraversed")}).addTo(this.grptrace)}),this.meta.within=this.$TURF_booleanwithin(s,this.grpbrooklinepoly.toGeoJSON().features[0]),this.meta.been=this.$_.some(this.grpbuffered.features,e=>this.$TURF_booleanwithin(s,e)),this.meta.distanceToBorder=this.$TURF_pointtolinedistance(s,this.border.features[0],{units:"meters"}),this.meta.traceLength=this.$TURFLENGTH(this.grptrace.toGeoJSON()).toFixed(1)}}},_GETHISTORY:function(){this.loadings.app=!0,e.getJSON("static/ebl.geojson",e=>{this.loadings.app=!1,this.tracks.history=e}),e.getJSON("static/ebl-buffered.geojson",e=>{L.geoJSON(e,{style:this._STILE("buffer")}).addTo(this.grpbuffered),this.loadings.app=!1}),this._TRACE()},_MAPHISTORY:function(){this.grphistory.clearLayers(),this.tracks.history?(L.geoJSON(this.tracks.history,{style:this._STILE("history")}).addTo(this.grphistory),this.meta.historyLengthTotal=this.$TURFLENGTH(this.grphistory.toGeoJSON()),this.MAP.fitBounds(this.grphistory.getBounds())):this.konsole=[{timeout:20,klass:"has-text-error",msg:"no history to map",sender:"if.map.history"}]},_META:function(e){switch(e){case"history":if(this.border&&this.grphistory.getLayers().length>0){}else console.log("border not ready")}},_BUFFERHISTORY:function(e){this.grpbuffered.clearLayers(),this.tracks.buffered=this.$TURFBUFFER(this.grphistory.toGeoJSON(),10,{units:"meters"})},_MAPBUFFEREDHISTORY:function(e){L.geoJSON(this.tracks.buffered,{style:e=>this._STILE("buffer",e)}).addTo(this.grpbuffered)},_SETROUTE:function(){let e={ridekey:this.actives.rideKey?this.actives.rideKey:"$",basemap:this.actives.baseMap?this.actives.baseMap:"$",query:this.actives.queryString?this.actives.queryString:"$",bbox:this.actives.bboxString?this.actives.bboxString:"$"};this.$router.push({params:e})},_LAUDIT:function(e,t){let s=null;switch(e){case"grphistory":t?(this.MAP.addLayer(this.grphistory),this.$_.findWhere(this.layers,{handle:e}).on=!0):((s=this.$_.findWhere(this.layers,{handle:e}).on)?this.MAP.removeLayer(this.grphistory):this.MAP.addLayer(this.grphistory),this.$_.findWhere(this.layers,{handle:e}).on=!s);break;case"grpbuffered":t?(this.MAP.addLayer(this.grpbuffered),this.$_.findWhere(this.layers,{handle:e}).on=!0):((s=this.$_.findWhere(this.layers,{handle:e}).on)?this.MAP.removeLayer(this.grpbuffered):this.MAP.addLayer(this.grpbuffered),this.$_.findWhere(this.layers,{handle:e}).on=!s);break;case"grpcenterlines":t?(this.MAP.addLayer(this.grpcenterlines),this.$_.findWhere(this.layers,{handle:e}).on=!0):((s=this.$_.findWhere(this.layers,{handle:e}).on)?this.MAP.removeLayer(this.grpcenterlines):this.MAP.addLayer(this.grpcenterlines),this.$_.findWhere(this.layers,{handle:e}).on=!s);break;case"grpdebug":t?(this.MAP.addLayer(this.grpdebug),this.$_.findWhere(this.layers,{handle:e}).on=!0):((s=this.$_.findWhere(this.layers,{handle:e}).on)?this.MAP.removeLayer(this.grpdebug):this.MAP.addLayer(this.grpdebug),this.$_.findWhere(this.layers,{handle:e}).on=!s)}}},watch:{loadings:{deep:!0,handler:function(e,t){this.$_.contains(this.$_.values(this.loadings),!0)?this.$refs.topProgress.start():this.$refs.topProgress.done()}},"tracks.history":{handler:function(e,t){this._MAPHISTORY()}},trace:{handler:function(e,t){this._MAPTRACE(),this._META("trace")}}}}}).call(t,s("7t+N"),s("44pt"))},dj2B:function(e,t){const s=5,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",a=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],r=1,o=0,n="undefined"!=typeof BigInt?BigInt:Number;function l(e){let t=e;return t&n(1)&&(t=~t),+(t>>=n(1)).toString()}function h(e){let t="",s=n(e);for(;s>31;){const e=s&n(31)|n(32);t+=i[e],s>>=n(5)}return t+i[s]}function c(e){let t=n(e);const s=t<0;return t<<=n(1),s&&(t=~t),h(t)}e.exports={encode:function({precision:e=s,thirdDim:t=o,thirdDimPrecision:i=0,polyline:a}){const l=10**e,d=10**i,p=function(e,t,s){if(e<0||e>15)throw new Error("precision out of range. Should be between 0 and 15");if(s<0||s>15)throw new Error("thirdDimPrecision out of range. Should be between 0 and 15");if(t<0||t>7||4===t||5===t)throw new Error("thirdDim should be between 0, 1, 2, 3, 6 or 7");const i=s<<7|t<<4|e;return h(r)+h(i)}(e,t,i),u=[];let g=n(0),f=n(0),m=n(0);return a.forEach(e=>{const s=n(Math.round(e[0]*l));u.push(c(s-g)),g=s;const i=n(Math.round(e[1]*l));if(u.push(c(i-f)),f=i,t){const t=n(Math.round(e[2]*d));u.push(c(t-m)),m=t}}),[...p,...u].join("")},decode:function(e){const t=function(e){let t=n(0),s=n(0);const i=[];if(e.split("").forEach(e=>{const r=n(function(e){const t=e.charCodeAt(0);return a[t-45]}(e));t|=(r&n(31))<<s,(r&n(32))===n(0)?(i.push(t),t=n(0),s=n(0)):s+=n(5)}),s>0)throw new Error("Invalid encoding");return i}(e),s=function(e,t){if(+e.toString()!==r)throw new Error("Invalid format version");const s=+t.toString();return{precision:15&s,thirdDim:s>>4&7,thirdDimPrecision:s>>7&15}}(t[0],t[1]),i=10**s.precision,o=10**s.thirdDimPrecision,{thirdDim:h}=s;let c=0,d=0,p=0;const u=[];let g=2;for(;g<t.length;)c+=l(t[g])/i,d+=l(t[g+1])/i,h?(p+=l(t[g+2])/o,u.push([c,d,p]),g+=3):(u.push([c,d]),g+=2);if(g!==t.length)throw new Error("Invalid encoding. Premature ending reached");return{header:s,polyline:u}},ABSENT:o,LEVEL:1,ALTITUDE:2,ELEVATION:3}},qrve:function(e,t){},uslO:function(e,t,s){var i={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn-bd":"1C9R","./bn-bd.js":"1C9R","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-in":"yJfC","./en-in.js":"yJfC","./en-nz":"dyB6","./en-nz.js":"dyB6","./en-sg":"NYST","./en-sg.js":"NYST","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-mx":"USNP","./es-mx.js":"USNP","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fil":"rMbQ","./fil.js":"rMbQ","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./ga":"U5Iz","./ga.js":"U5Iz","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-deva":"VGQH","./gom-deva.js":"VGQH","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it-ch":"/E8D","./it-ch.js":"/E8D","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ku":"kI9l","./ku.js":"kI9l","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./oc-lnc":"KOFO","./oc-lnc.js":"KOFO","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tk":"+WRH","./tk.js":"+WRH","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-mo":"+WA1","./zh-mo.js":"+WA1","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function a(e){return s(r(e))}function r(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id="uslO"}},["NHnr"]);
//# sourceMappingURL=app.b20389787201bea2041d.js.map